!function(t,e){e.urlParams("debug")&&e.debug,t(function(){function n(t){return t.length}function o(t,e){return+new Date(C,t,e)>_?+new Date(C,t,e):+new Date(C+1,t,e)}function a(t){var e,n,o=(""+t).split(""),a=!0;for(e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1];if(a)return a;for(a=!0,e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1]+1;if(a)return a;for(a=!0,e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1]-1;if(a)return a;for(a=!0,e=1,n=o.length;e<n;e++)a=a&&0==o[e];return a}!function(t){t.CoolDate=function(t,e,n){this.__timestamp=t,this.__title=e,this.__type=n.toLowerCase()},t.CoolDate.prototype={constructor:CoolDate,get timestamp(){return this.__timestamp},get title(){return this.__title},toString:function(){var t=Math.ceil((this.__timestamp-m)/864e5);return[0==t?"Сегодня":[1==t?"Завтра":2==t?"Послезавтра":["Через","<b>"+t+"</b>",Slavunya.math(t).declination(["день","дня","дней"]).toLowerCase()].join(" "),"будет"].join(" "),this.__type+":",this.__title+"."].join(" ")}},t.CoolDate.__defineGetter__("MONTH",function(){return"Круглая дата"}),t.CoolDate.__defineGetter__("COUNT",function(){return"Красивое количество дней"}),t.CoolDate.__defineGetter__("IMPORTANT",function(){return"Важное событие"})}(window);var i,r,l,u=!1,s=setInterval(function(){t(".mail").toggleClass("swing")},2e3),c=function(){u=!0,clearInterval(s),t(".mail").removeClass("swing")},f=location.hash.replace("#","").split("/").filter(n),h=parseInt(f[2])||11,D=(f[1]||8)-1,C=parseInt(f[0])||2016,_=+new Date(C,D,h),m=+new Date,w=parseInt((+new Date-_)/864e5),p=[new CoolDate((+new Date(C+1,D,h)),"Год",CoolDate.MONTH),new CoolDate((+new Date(C+1,D+6,h)),"Полтора год",CoolDate.MONTH),new CoolDate(o(1,14),'Первое "14 февраля" вместе',CoolDate.IMPORTANT),new CoolDate(o(1,23),'Первое "23 февраля" вместе',CoolDate.IMPORTANT),new CoolDate(o(2,8),'Первое "8 марта" вместе',CoolDate.IMPORTANT)],d=0,g=0;for(r=1;r<12;r++)p.push(new CoolDate((+new Date(C,D+r,h)),[r,6==r?"Полгода":e.math(r).declination(["месяц","месяца","месяцев"])].join(" "),CoolDate.MONTH));for(r=2;r<=10;r++)p.push(new CoolDate((+new Date(C+r,D,h)),[r,e.math(r).declination(["год","года","лет"])].join(" "),CoolDate.MONTH));for(r=100,l=3660;r<l;r++)a(r)&&p.push(new CoolDate(_+864e5*r,[r,e.math(r).declination(["день","дня","дней"])].join(" "),CoolDate.COUNT));p.sort(function(t,e){return t.timestamp-e.timestamp}),i=p.filter(function(t){return d<10&&(t.timestamp-m)/864e5>=0&&(d++,!0)}),e.log(i),t(".title.days").text(w),t(".text .days").text(Slavunya.math(w).declination(["день","дня","дней"])),t("#nearest").html(i[g]+"").on("click",function(){g=g<i.length-1?g+1:0,t(this).html(i[g]+""),u||c()}).on("contextmenu",function(e){e.preventDefault(),g=g>0?g-1:i.length-1,t(this).html(i[g]+""),u||c()}),t("body").delay(2e3).queue(function(e){t(this).addClass("ready"),e()})})}(jQuery,Slavunya),function(){var t=new ProgressBar.Path("#heart-path",{easing:"easeInOut",duration:2800});t.set(-1),t.animate(1)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIiQkIiwidXJsUGFyYW1zIiwiZGVidWciLCJub3RFbXB0eSIsIml0ZW0iLCJsZW5ndGgiLCJmaXJzdEltcG9ydGFudCIsIm0iLCJkIiwiRGF0ZSIsInNZIiwic1QiLCJjb29sTnVtYmVyIiwibnVtYmVyIiwiYyIsImwiLCJudW0iLCJzcGxpdCIsImJvb2wiLCJ3aW5kb3ciLCJDb29sRGF0ZSIsInRpbWVzdGFtcCIsInRpdGxlIiwidHlwZSIsInRoaXMiLCJfX3RpbWVzdGFtcCIsIl9fdGl0bGUiLCJfX3R5cGUiLCJ0b0xvd2VyQ2FzZSIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidG9TdHJpbmciLCJkYXlzIiwiTWF0aCIsImNlaWwiLCJ0VCIsIlNsYXZ1bnlhIiwibWF0aCIsImRlY2xpbmF0aW9uIiwiam9pbiIsIl9fZGVmaW5lR2V0dGVyX18iLCJuZWFyZXN0IiwiaXNTd3lwZSIsImlzU3d5cGVJZCIsInNldEludGVydmFsIiwidG9nZ2xlQ2xhc3MiLCJpc1N3eXBlT2ZmIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwiaEQiLCJsb2NhdGlvbiIsImhhc2giLCJyZXBsYWNlIiwiZmlsdGVyIiwic0QiLCJwYXJzZUludCIsInNNIiwiY29vbCIsIk1PTlRIIiwiSU1QT1JUQU5UIiwibmVhcmVzdExlbmd0aCIsIm5lYXJlc3RJdGVyYXRvciIsInB1c2giLCJDT1VOVCIsInNvcnQiLCJhIiwiYiIsImxvZyIsInRleHQiLCJodG1sIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJkZWxheSIsInF1ZXVlIiwibmV4dCIsImFkZENsYXNzIiwialF1ZXJ5IiwiYmFyIiwiUHJvZ3Jlc3NCYXIiLCJQYXRoIiwiZWFzaW5nIiwiZHVyYXRpb24iLCJzZXQiLCJhbmltYXRlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFXQSxFQUFHQyxHQUVOQSxFQUFHQyxVQUFVLFVBQ2JELEVBQUdFLE1BR1BILEVBQUUsV0EwREUs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R0FBZ0IsS0FDWEgsRUFBS3BDLFVBQVljLEdBQU0sT0FBUyxJQUNqQ3lCLEtBQ08sS0FNbkI1RCxFQUFHbUUsSUFBSTFCLEdBRVAxQyxFQUFFLGVBQ0dxRSxLQUFLcEMsR0FFVmpDLEVBQUUsZUFDR3FFLEtBQ0doQyxTQUNLQyxLQUFLTCxHQUNMTSxhQUNHLE9BQ0EsTUFDQSxVQUloQnZDLEVBQUUsWUFDR3NFLEtBQUs1QixFQUFRb0IsR0FBbUIsSUFDaENTLEdBQUcsUUFBUyxXQUNUVCxFQUFrQkEsRUFBa0JwQixFQUFRcEMsT0FBUyxFQUFJd0QsRUFBa0IsRUFBSSxFQUUvRTlELEVBQUV5QixNQUNHNkMsS0FBSzVCLEVBQVFvQixHQUFtQixJQUVoQ25CLEdBQ0RJLE1BR1B3QixHQUFHLGNBQWUsU0FBVUMsR0FDekJBLEVBQUVDLGlCQUVGWCxFQUFrQkEsRUFBa0IsRUFBSUEsRUFBa0IsRUFBSXBCLEVBQVFwQyxPQUFTLEVBRS9FTixFQUFFeUIsTUFDRzZDLEtBQUs1QixFQUFRb0IsR0FBbUIsSUFFaENuQixHQUNESSxNQUlaL0MsRUFBRSxRQUNHMEUsTUFBTSxLQUNOQyxNQUFNLFNBQVVDLEdBQ2I1RSxFQUFFeUIsTUFDR29ELFNBQVMsU0FDZEQsU0FLYkUsT0FBUXpDLFVBRVgsV0FDSSxHQUFJMEMsR0FBTSxHQUFJQyxhQUFZQyxLQUFLLGVBQzNCQyxPQUFVLFlBQ1ZDLFNBQVUsTUFHZEosR0FBSUssS0FBSSxHQUNSTCxFQUFJTSxRQUFRIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQsICQkKSB7XG5cbiAgICBpZiAoJCQudXJsUGFyYW1zKFwiZGVidWdcIikpIHtcbiAgICAgICAgJCQuZGVidWc7XG4gICAgfVxuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgKGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgICAgICAgICAgIHdpbmRvdy5Db29sRGF0ZSA9IGZ1bmN0aW9uIENvb2xEYXRlKHRpbWVzdGFtcCwgdGl0bGUsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIHRoaXMuX190aXRsZSAgICAgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHlwZSAgICAgID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd2luZG93LkNvb2xEYXRlLnByb3RvdHlwZSA9IHtcbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcjogQ29vbERhdGUsXG5cbiAgICAgICAgICAgICAgICBnZXQgdGltZXN0YW1wKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX3RpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldCB0aXRsZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX190aXRsZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRheXMgPSBNYXRoLmNlaWwoKHRoaXMuX190aW1lc3RhbXAgLSB0VCkgLyA4NjRlNSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIChkYXlzID09IDAgPyBcItCh0LXQs9C+0LTQvdGPXCIgOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5cyA9PSAxID8gXCLQl9Cw0LLRgtGA0LBcIiA6IGRheXMgPT0gMiA/IFwi0J/QvtGB0LvQtdC30LDQstGC0YDQsFwiIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItCn0LXRgNC10LdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGI+XCIgKyBkYXlzICsgXCI8L2I+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbGF2dW55YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXRoKGRheXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC10L3RjFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00L3Rj1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00L3QtdC5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LHRg9C00LXRglwiXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX190eXBlICsgXCI6XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdGl0bGUgKyBcIi5cIlxuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHdpbmRvdy5Db29sRGF0ZS5fX2RlZmluZUdldHRlcl9fKFwiTU9OVEhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcItCa0YDRg9Cz0LvQsNGPINC00LDRgtCwXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5Db29sRGF0ZS5fX2RlZmluZUdldHRlcl9fKFwiQ09VTlRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcItCa0YDQsNGB0LjQstC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LTQvdC10LlcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2luZG93LkNvb2xEYXRlLl9fZGVmaW5lR2V0dGVyX18oXCJJTVBPUlRBTlRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcItCS0LDQttC90L7QtSDRgdC+0LHRi9GC0LjQtVwiO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSkod2luZG93KTtcblxuICAgICAgICBmdW5jdGlvbiBub3RFbXB0eShpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5sZW5ndGhcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZpcnN0SW1wb3J0YW50KG0sIGQpIHtcbiAgICAgICAgICAgIGlmICgrKG5ldyBEYXRlKHNZLCBtLCBkKSkgPiBzVCkge1xuICAgICAgICAgICAgICAgIHJldHVybiArKG5ldyBEYXRlKHNZLCBtLCBkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKyhuZXcgRGF0ZShzWSArIDEsIG0sIGQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvb2xOdW1iZXIobnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgbnVtICA9IChcIlwiICsgbnVtYmVyKS5zcGxpdChcIlwiKSxcbiAgICAgICAgICAgICAgICBib29sID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICBjLCBsO1xuXG4gICAgICAgICAgICBmb3IgKGMgPSAwLCBsID0gbnVtLmxlbmd0aCAtIDE7IGMgPCBsOyBjKyspIHtcbiAgICAgICAgICAgICAgICBib29sID0gYm9vbCAmJiBudW1bY10gPT0gbnVtW2MgKyAxXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoYyA9IDAsIGwgPSBudW0ubGVuZ3RoIC0gMTsgYyA8IGw7IGMrKykge1xuICAgICAgICAgICAgICAgIGJvb2wgPSBib29sICYmIG51bVtjXSA9PSBudW1bYyArIDFdICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoYyA9IDAsIGwgPSBudW0ubGVuZ3RoIC0gMTsgYyA8IGw7IGMrKykge1xuICAgICAgICAgICAgICAgIGJvb2wgPSBib29sICYmIG51bVtjXSA9PSBudW1bYyArIDFdIC0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoYyA9IDEsIGwgPSBudW0ubGVuZ3RoOyBjIDwgbDsgYysrKSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IGJvb2wgJiYgbnVtW2NdID09IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlzU3d5cGUgICAgICAgICA9IGZhbHNlLFxuICAgICAgICAgICAgaXNTd3lwZUlkICAgICAgID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIubWFpbFwiKVxuICAgICAgICAgICAgICAgICAgICAudG9nZ2xlQ2xhc3MoXCJzd2luZ1wiKTtcbiAgICAgICAgICAgIH0sIDJlMyksXG4gICAgICAgICAgICBpc1N3eXBlT2ZmICAgICAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaXNTd3lwZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpc1N3eXBlSWQpO1xuICAgICAgICAgICAgICAgICQoXCIubWFpbFwiKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJzd2luZ1wiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhEICAgICAgICAgICAgICA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZShcIiNcIiwgXCJcIikuc3BsaXQoXCIvXCIpLmZpbHRlcihub3RFbXB0eSksXG4gICAgICAgICAgICBzRCAgICAgICAgICAgICAgPSBwYXJzZUludChoRFsyXSkgfHwgMTEsXG4gICAgICAgICAgICBzTSAgICAgICAgICAgICAgPSAoaERbMV0gfHwgOCkgLSAxLFxuICAgICAgICAgICAgc1kgICAgICAgICAgICAgID0gcGFyc2VJbnQoaERbMF0pIHx8IDIwMTYsXG4gICAgICAgICAgICBzVCAgICAgICAgICAgICAgPSArKG5ldyBEYXRlKHNZLCBzTSwgc0QpKSxcbiAgICAgICAgICAgIHRUICAgICAgICAgICAgICA9ICsobmV3IERhdGUpLFxuICAgICAgICAgICAgZGF5cyAgICAgICAgICAgID0gcGFyc2VJbnQoKCsobmV3IERhdGUpIC0gc1QpIC8gODY0ZTUpLFxuICAgICAgICAgICAgY29vbCAgICAgICAgICAgID0gW1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqINCa0YDRg9Cz0LvRi9C1INC00LDRgtGLXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbmV3IENvb2xEYXRlKCsobmV3IERhdGUoc1kgKyAxLCBzTSwgc0QpKSwgXCLQk9C+0LRcIiwgQ29vbERhdGUuTU9OVEgpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29sRGF0ZSgrKG5ldyBEYXRlKHNZICsgMSwgc00gKyA2LCBzRCkpLCBcItCf0L7Qu9GC0L7RgNCwINCz0L7QtFwiLCBDb29sRGF0ZS5NT05USCksXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiDQktCw0LbQvdGL0LUg0YHQvtCx0YvRgtC40Y9cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBuZXcgQ29vbERhdGUoZmlyc3RJbXBvcnRhbnQoMSwgMTQpLCBcItCf0LXRgNCy0L7QtSBcXFwiMTQg0YTQtdCy0YDQsNC70Y9cXFwiINCy0LzQtdGB0YLQtVwiLCBDb29sRGF0ZS5JTVBPUlRBTlQpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29sRGF0ZShmaXJzdEltcG9ydGFudCgxLCAyMyksIFwi0J/QtdGA0LLQvtC1IFxcXCIyMyDRhNC10LLRgNCw0LvRj1xcXCIg0LLQvNC10YHRgtC1XCIsIENvb2xEYXRlLklNUE9SVEFOVCksXG4gICAgICAgICAgICAgICAgbmV3IENvb2xEYXRlKGZpcnN0SW1wb3J0YW50KDIsIDgpLCBcItCf0LXRgNCy0L7QtSBcXFwiOCDQvNCw0YDRgtCwXFxcIiDQstC80LXRgdGC0LVcIiwgQ29vbERhdGUuSU1QT1JUQU5UKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG5lYXJlc3QsXG4gICAgICAgICAgICBuZWFyZXN0TGVuZ3RoICAgPSAwLFxuICAgICAgICAgICAgbmVhcmVzdEl0ZXJhdG9yID0gMCxcbiAgICAgICAgICAgIGMsIGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqINCa0YDRg9Cz0LvRi9C1INC00LDRgtGLXG4gICAgICAgICAqL1xuICAgICAgICBmb3IgKGMgPSAxOyBjIDwgMTI7IGMrKykge1xuICAgICAgICAgICAgY29vbC5wdXNoKG5ldyBDb29sRGF0ZShcbiAgICAgICAgICAgICAgICArKG5ldyBEYXRlKHNZLCBzTSArIGMsIHNEKSksXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBjLFxuICAgICAgICAgICAgICAgICAgICBjID09IDYgPyBcItCf0L7Qu9Cz0L7QtNCwXCIgOiAkJFxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGgoYylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kZWNsaW5hdGlvbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQvNC10YHRj9GGXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQvNC10YHRj9GG0LBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC80LXRgdGP0YbQtdCyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgICAgICBDb29sRGF0ZS5NT05USFxuICAgICAgICAgICAgKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICog0JrRgNGD0LPQu9GL0LUg0LTQsNGC0YtcbiAgICAgICAgICovXG4gICAgICAgIGZvciAoYyA9IDI7IGMgPD0gMTA7IGMrKykge1xuICAgICAgICAgICAgY29vbC5wdXNoKG5ldyBDb29sRGF0ZShcbiAgICAgICAgICAgICAgICArKG5ldyBEYXRlKHNZICsgYywgc00sIHNEKSksXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBjLFxuICAgICAgICAgICAgICAgICAgICAkJFxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGgoYylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kZWNsaW5hdGlvbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQs9C+0LRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItCz0L7QtNCwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQu9C10YJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpLFxuICAgICAgICAgICAgICAgIENvb2xEYXRlLk1PTlRIXG4gICAgICAgICAgICApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDQmtGA0LDRgdC40LLRi9C1INGH0LjRgdC70LBcbiAgICAgICAgICovXG4gICAgICAgIGZvciAoYyA9IDEwMCwgbCA9IDM2NiAqIDEwOyBjIDwgbDsgYysrKSB7XG4gICAgICAgICAgICBpZiAoY29vbE51bWJlcihjKSkge1xuICAgICAgICAgICAgICAgIGNvb2wucHVzaChuZXcgQ29vbERhdGUoc1QgKyBjICogODY0ZTUsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMsXG4gICAgICAgICAgICAgICAgICAgICAgICAkJFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXRoKGMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC10L3RjFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00L3Rj1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00L3QtdC5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICBDb29sRGF0ZS5DT1VOVFxuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29vbC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmVhcmVzdCA9IGNvb2wuZmlsdGVyKGZ1bmN0aW9uIChjb29sKSB7XG4gICAgICAgICAgICBpZiAobmVhcmVzdExlbmd0aCA8IDEwKSB7XG4gICAgICAgICAgICAgICAgaWYgKChjb29sLnRpbWVzdGFtcCAtIHRUKSAvIDg2NGU1ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmVhcmVzdExlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQkLmxvZyhuZWFyZXN0KTtcblxuICAgICAgICAkKFwiLnRpdGxlLmRheXNcIilcbiAgICAgICAgICAgIC50ZXh0KGRheXMpO1xuXG4gICAgICAgICQoXCIudGV4dCAuZGF5c1wiKVxuICAgICAgICAgICAgLnRleHQoXG4gICAgICAgICAgICAgICAgU2xhdnVueWFcbiAgICAgICAgICAgICAgICAgICAgLm1hdGgoZGF5cylcbiAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQtdC90YxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdGPXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcItC00L3QtdC5XCJcbiAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgJChcIiNuZWFyZXN0XCIpXG4gICAgICAgICAgICAuaHRtbChuZWFyZXN0W25lYXJlc3RJdGVyYXRvcl0gKyBcIlwiKVxuICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5lYXJlc3RJdGVyYXRvciA9IG5lYXJlc3RJdGVyYXRvciA8IG5lYXJlc3QubGVuZ3RoIC0gMSA/IG5lYXJlc3RJdGVyYXRvciArIDEgOiAwO1xuXG4gICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChuZWFyZXN0W25lYXJlc3RJdGVyYXRvcl0gKyBcIlwiKTtcblxuICAgICAgICAgICAgICAgIGlmICghaXNTd3lwZSkge1xuICAgICAgICAgICAgICAgICAgICBpc1N3eXBlT2ZmKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgbmVhcmVzdEl0ZXJhdG9yID0gbmVhcmVzdEl0ZXJhdG9yID4gMCA/IG5lYXJlc3RJdGVyYXRvciAtIDEgOiBuZWFyZXN0Lmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKG5lYXJlc3RbbmVhcmVzdEl0ZXJhdG9yXSArIFwiXCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc1N3eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzU3d5cGVPZmYoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkKFwiYm9keVwiKVxuICAgICAgICAgICAgLmRlbGF5KDJlMylcbiAgICAgICAgICAgIC5xdWV1ZShmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwicmVhZHlcIik7XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICB9KTtcblxufSkoalF1ZXJ5LCBTbGF2dW55YSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhciA9IG5ldyBQcm9ncmVzc0Jhci5QYXRoKCcjaGVhcnQtcGF0aCcsIHtcbiAgICAgICAgZWFzaW5nOiAgICdlYXNlSW5PdXQnLFxuICAgICAgICBkdXJhdGlvbjogMTQwMCAqIDJcbiAgICB9KTtcblxuICAgIGJhci5zZXQoLTEpO1xuICAgIGJhci5hbmltYXRlKDEpO1xufSkoKTtcbiJdfQ==
