!function(t,e){e.urlParams("debug")&&e.debug,t(function(){function n(t){return t.length}function o(t,e){return+new Date(m,t,e)>d?+new Date(m,t,e):+new Date(m+1,t,e)}function a(t){var e,n,o=(""+t).split(""),a=!0;for(e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1];if(a)return a;for(a=!0,e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1]+1;if(a)return a;for(a=!0,e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1]-1;if(a)return a;for(a=!0,e=1,n=o.length;e<n;e++)a=a&&0==o[e];return a}function i(e){e&&e.preventDefault(),t("#nearest").html(u[j]+""),f||D()}function r(t){j=j<u.length-1?j+1:0,i(t)}function l(t){j=j>0?j-1:u.length-1,i(t)}!function(t){t.CoolDate=function(t,e,n){this.__timestamp=t,this.__title=e,this.__type=n.toLowerCase()},t.CoolDate.prototype={constructor:CoolDate,get timestamp(){return this.__timestamp},get title(){return this.__title},toString:function(){var t=Math.ceil((this.__timestamp-p)/864e5);return[0==t?"Сегодня":[1==t?"Завтра":2==t?"Послезавтра":["Через","<b>"+t+"</b>",Slavunya.math(t).declination(["день","дня","дней"]).toLowerCase()].join(" "),"будет"].join(" "),this.__type+":",this.__title+"."].join(" ")}},t.CoolDate.__defineGetter__("MONTH",function(){return"Круглая дата"}),t.CoolDate.__defineGetter__("COUNT",function(){return"Красивое количество дней"}),t.CoolDate.__defineGetter__("IMPORTANT",function(){return"Важное событие"})}(window);var u,s,c,f=!1,h=setInterval(function(){t(".mail").toggleClass("swing")},2e3),D=function(){f=!0,clearInterval(h),t(".mail").removeClass("swing")},w=location.hash.replace("#","").split("/").filter(n),C=parseInt(w[2])||11,_=(w[1]||8)-1,m=parseInt(w[0])||2016,d=+new Date(m,_,C),p=+new Date,g=parseInt((+new Date-d)/864e5),v=[new CoolDate((+new Date(m+1,_,C)),"Год",CoolDate.MONTH),new CoolDate((+new Date(m+1,_+6,C)),"Полтора год",CoolDate.MONTH),new CoolDate(o(1,14),'Первое "14 февраля" вместе',CoolDate.IMPORTANT),new CoolDate(o(1,23),'Первое "23 февраля" вместе',CoolDate.IMPORTANT),new CoolDate(o(2,8),'Первое "8 марта" вместе',CoolDate.IMPORTANT)],T=0,j=0,O=function(){var t,e,n;return t=jQuery(".js-scroll"),e=t.find("div"),n=(e.width()-t.width())/2,t.scrollLeft(n),n}(),y=+new Date,M=function(){var t=+new Date;return y+1500<t&&(y=t,!0)};for(s=1;s<12;s++)v.push(new CoolDate((+new Date(m,_+s,C)),[s,6==s?"Полгода":e.math(s).declination(["месяц","месяца","месяцев"])].join(" "),CoolDate.MONTH));for(s=2;s<=10;s++)v.push(new CoolDate((+new Date(m+s,_,C)),[s,e.math(s).declination(["год","года","лет"])].join(" "),CoolDate.MONTH));for(s=100,c=3660;s<c;s++)a(s)&&v.push(new CoolDate(d+864e5*s,[s,e.math(s).declination(["день","дня","дней"])].join(" "),CoolDate.COUNT));v.sort(function(t,e){return t.timestamp-e.timestamp}),u=v.filter(function(t){return T<10&&Math.ceil((t.timestamp-p)/864e5)>=0&&(T++,!0)}),e.log(u),t(".title.days").text(g),t(".text .days").text(Slavunya.math(g).declination(["день","дня","дней"])),t("#nearest").html(u[j]+""),t("#nearest-wrap .js-scroll").on("click",r).on("contextmenu",l).on("scroll",function(e){var n=t(this);M()&&(n.scrollLeft()<O?l(e):r(e)),n.scrollLeft(O)}),t("body").delay(2e3).queue(function(e){t(this).addClass("ready"),e()})})}(jQuery,Slavunya),function(){var t=new ProgressBar.Path("#heart-path",{easing:"easeInOut",duration:2800});t.set(-1),t.animate(1)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIiQkIiwidXJsUGFyYW1zIiwiZGVidWciLCJub3RFbXB0eSIsIml0ZW0iLCJsZW5ndGgiLCJmaXJzdEltcG9ydGFudCIsIm0iLCJkIiwiRGF0ZSIsInNZIiwic1QiLCJjb29sTnVtYmVyIiwibnVtYmVyIiwiYyIsImwiLCJudW0iLCJzcGxpdCIsImJvb2wiLCJuZWFyZXN0Q2hhbmdlIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaHRtbCIsIm5lYXJlc3QiLCJuZWFyZXN0SXRlcmF0b3IiLCJpc1N3eXBlIiwiaXNTd3lwZU9mZiIsIm5lYXJlc3ROZXh0IiwibmVhcmVzdFByZXYiLCJ3aW5kb3ciLCJDb29sRGF0ZSIsInRpbWVzdGFtcCIsInRpdGxlIiwidHlwZSIsInRoaXMiLCJfX3RpbWVzdGFtcCIsIl9fdGl0bGUiLCJfX3R5cGUiLCJ0b0xvd2VyQ2FzZSIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidG9TdHJpbmciLCJkYXlzIiwiTWF0aCIsImNlaWwiLCJ0VCIsIlNsYXZ1bnlhIiwibWF0aCIsImRlY2xpbmF0aW9uIiwiam9pbiIsIl9fZGVmaW5lR2V0dGVyX18iLCJpc1N3eXBlSWQiLCJzZXRJbnRlcnZhbCIsInRvZ2dsZUNsYXNzIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwiaEQiLCJsb2NhdGlvbiIsImhhc2giLCJyZXBsYWNlIiwiZmlsdGVyIiwic0QiLCJwYXJzZUludCIsInNNIiwiY29vbCIsIk1PTlRIIiwiSU1QT1JUQU5UIiwibmVhcmVzdExlbmd0aCIsImpzX3Njcm9sbF9wb3NpdGlvbiIsInAiLCJyIiwialF1ZXJ5IiwiZmluZCIsIndpZHRoIiwic2Nyb2xsTGVmdCIsImpzX3Njcm9sbF90aW1lciIsImpzX3Njcm9sbF90aW1lcl9oYW5kbGVyIiwidCIsInB1c2giLCJDT1VOVCIsInNvcnQiLCJhIiwiYiIsImxvZyIsInRleHQiLCJvbiIsInNlbGYiLCJkZWxheSIsInF1ZXVlIiwibmV4dCIsImFkZENsYXNzIiwiYmFyIiwiUHJvZ3Jlc3NCYXIiLCJQYXRoIiwiZWFzaW5nIiwiZHVyYXRpb24iLCJzZXQiLCJhbmltYXRlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFXQSxFQUFHQyxHQUVOQSxFQUFHQyxVQUFVLFVBQ2JELEVBQUdFLE1BR1BILEVBQUUsV0EwREUsUUFBU0ksR0FBU0MsR0FDZCxNQUFPQSxHQUFLQyxPQUdoQixRQUFTQyxHQUFlQyxFQUFHQyxHQUN2QixPQUFLLEdBQUtDLE1BQUtDLEVBQUlILEVBQUdDLEdBQU1HLEdBQ2hCLEdBQUtGLE1BQUtDLEVBQUlILEVBQUdDLElBRXJCLEdBQUtDLE1BQUtDLEVBQUssRUFBR0gsRUFBR0MsR0FHakMsUUFBU0ksR0FBV0MsR0FDaEIsR0FFSUMsR0FBR0MsRUFGSEMsR0FBUSxHQUFLSCxHQUFRSSxNQUFNLElBQzNCQyxHQUFPLENBR1gsS0FBS0osRUFBSSxFQUFHQyxFQUFJQyxFQUFJWCxPQUFTLEVBQUdTLEVBQUlDLEVBQUdELElBQ25DSSxFQUFPQSxHQUFRRixFQUFJRixJQUFNRSxFQUFJRixFQUFJLEVBR3JDLElBQUlJLEVBQ0EsTUFBT0EsRUFLWCxLQUhJQSxHQUFPLEVBR05KLEVBQUksRUFBR0MsRUFBSUMsRUFBSVgsT0FBUyxFQUFHUyxFQUFJQyxFQUFHRCxJQUNuQ0ksRUFBT0EsR0FBUUYsRUFBSUYsSUFBTUUsRUFBSUYsRUFBSSxHQUFLLENBRzFDLElBQUlJLEVBQ0EsTUFBT0EsRUFLWCxLQUhJQSxHQUFPLEVBR05KLEVBQUksRUFBR0MsRUFBSUMsRUFBSVgsT0FBUyxFQUFHUyxFQUFJQyxFQUFHRCxJQUNuQ0ksRUFBT0EsR0FBUUYsRUFBSUYsSUFBTUUsRUFBSUYsRUFBSSxHQUFLLENBRzFDLElBQUlJLEVBQ0EsTUFBT0EsRUFLWCxLQUhJQSxHQUFPLEVBR05KLEVBQUksRUFBR0MsRUFBSUMsRUFBSVgsT0FBUVMsRUFBSUMsRUFBR0QsSUFDL0JJLEVBQU9BLEdBQWtCLEdBQVZGLEVBQUlGLEVBR3ZCLE9BQU9JLEdBMkpY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QUcsUUFBUzFELEdBQ1owRCxHQUFHLGNBQWV6RCxHQUNsQnlELEdBQUcsU0FBVSxTQUFVakUsR0FDcEIsR0FBSWtFLEdBQU92RixFQUFFbUMsS0FFVDBDLE9BQ0lVLEVBQUtaLGFBQWVOLEVBQ3BCeEMsRUFBWVIsR0FFWk8sRUFBWVAsSUFJcEJrRSxFQUFLWixXQUFXTixLQUd4QnJFLEVBQUUsUUFDR3dGLE1BQU0sS0FDTkMsTUFBTSxTQUFVQyxHQUNiMUYsRUFBRW1DLE1BQ0d3RCxTQUFTLFNBQ2RELFNBS2JsQixPQUFRekIsVUFFWCxXQUNJLEdBQUk2QyxHQUFNLEdBQUlDLGFBQVlDLEtBQUssZUFDM0JDLE9BQVUsWUFDVkMsU0FBVSxNQUdkSixHQUFJSyxLQUFJLEdBQ1JMLEVBQUlNLFFBQVEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCwgJCQpIHtcblxuICAgIGlmICgkJC51cmxQYXJhbXMoXCJkZWJ1Z1wiKSkge1xuICAgICAgICAkJC5kZWJ1ZztcbiAgICB9XG5cbiAgICAkKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAoZnVuY3Rpb24gKHdpbmRvdykge1xuICAgICAgICAgICAgd2luZG93LkNvb2xEYXRlID0gZnVuY3Rpb24gQ29vbERhdGUodGltZXN0YW1wLCB0aXRsZSwgdHlwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX190aW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3RpdGxlICAgICA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIHRoaXMuX190eXBlICAgICAgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB3aW5kb3cuQ29vbERhdGUucHJvdG90eXBlID0ge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBDb29sRGF0ZSxcblxuICAgICAgICAgICAgICAgIGdldCB0aW1lc3RhbXAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fdGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0IHRpdGxlKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX3RpdGxlO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5cyA9IE1hdGguY2VpbCgodGhpcy5fX3RpbWVzdGFtcCAtIHRUKSAvIDg2NGU1KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgKGRheXMgPT0gMCA/IFwi0KHQtdCz0L7QtNC90Y9cIiA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzID09IDEgPyBcItCX0LDQstGC0YDQsFwiIDogZGF5cyA9PSAyID8gXCLQn9C+0YHQu9C10LfQsNCy0YLRgNCwXCIgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0KfQtdGA0LXQt1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8Yj5cIiArIGRheXMgKyBcIjwvYj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNsYXZ1bnlhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGgoZGF5cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGVjbGluYXRpb24oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00LXQvdGMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdGPXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdC10LlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQsdGD0LTQtdGCXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3R5cGUgKyBcIjpcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX190aXRsZSArIFwiLlwiXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd2luZG93LkNvb2xEYXRlLl9fZGVmaW5lR2V0dGVyX18oXCJNT05USFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi0JrRgNGD0LPQu9Cw0Y8g0LTQsNGC0LBcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2luZG93LkNvb2xEYXRlLl9fZGVmaW5lR2V0dGVyX18oXCJDT1VOVFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi0JrRgNCw0YHQuNCy0L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDQtNC90LXQuVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3aW5kb3cuQ29vbERhdGUuX19kZWZpbmVHZXR0ZXJfXyhcIklNUE9SVEFOVFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi0JLQsNC20L3QvtC1INGB0L7QsdGL0YLQuNC1XCI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KSh3aW5kb3cpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG5vdEVtcHR5KGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmxlbmd0aFxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmlyc3RJbXBvcnRhbnQobSwgZCkge1xuICAgICAgICAgICAgaWYgKCsobmV3IERhdGUoc1ksIG0sIGQpKSA+IHNUKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICsobmV3IERhdGUoc1ksIG0sIGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiArKG5ldyBEYXRlKHNZICsgMSwgbSwgZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY29vbE51bWJlcihudW1iZXIpIHtcbiAgICAgICAgICAgIHZhciBudW0gID0gKFwiXCIgKyBudW1iZXIpLnNwbGl0KFwiXCIpLFxuICAgICAgICAgICAgICAgIGJvb2wgPSB0cnVlLFxuICAgICAgICAgICAgICAgIGMsIGw7XG5cbiAgICAgICAgICAgIGZvciAoYyA9IDAsIGwgPSBudW0ubGVuZ3RoIC0gMTsgYyA8IGw7IGMrKykge1xuICAgICAgICAgICAgICAgIGJvb2wgPSBib29sICYmIG51bVtjXSA9PSBudW1bYyArIDFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib29sID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjID0gMCwgbCA9IG51bS5sZW5ndGggLSAxOyBjIDwgbDsgYysrKSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IGJvb2wgJiYgbnVtW2NdID09IG51bVtjICsgMV0gKyAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib29sID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjID0gMCwgbCA9IG51bS5sZW5ndGggLSAxOyBjIDwgbDsgYysrKSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IGJvb2wgJiYgbnVtW2NdID09IG51bVtjICsgMV0gLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib29sID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjID0gMSwgbCA9IG51bS5sZW5ndGg7IGMgPCBsOyBjKyspIHtcbiAgICAgICAgICAgICAgICBib29sID0gYm9vbCAmJiBudW1bY10gPT0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTd3lwZSAgICAgICAgICAgICAgICAgPSBmYWxzZSxcbiAgICAgICAgICAgIGlzU3d5cGVJZCAgICAgICAgICAgICAgID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIubWFpbFwiKVxuICAgICAgICAgICAgICAgICAgICAudG9nZ2xlQ2xhc3MoXCJzd2luZ1wiKTtcbiAgICAgICAgICAgIH0sIDJlMyksXG4gICAgICAgICAgICBpc1N3eXBlT2ZmICAgICAgICAgICAgICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpc1N3eXBlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGlzU3d5cGVJZCk7XG4gICAgICAgICAgICAgICAgJChcIi5tYWlsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcInN3aW5nXCIpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaEQgICAgICAgICAgICAgICAgICAgICAgPSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpLnNwbGl0KFwiL1wiKS5maWx0ZXIobm90RW1wdHkpLFxuICAgICAgICAgICAgc0QgICAgICAgICAgICAgICAgICAgICAgPSBwYXJzZUludChoRFsyXSkgfHwgMTEsXG4gICAgICAgICAgICBzTSAgICAgICAgICAgICAgICAgICAgICA9IChoRFsxXSB8fCA4KSAtIDEsXG4gICAgICAgICAgICBzWSAgICAgICAgICAgICAgICAgICAgICA9IHBhcnNlSW50KGhEWzBdKSB8fCAyMDE2LFxuICAgICAgICAgICAgc1QgICAgICAgICAgICAgICAgICAgICAgPSArKG5ldyBEYXRlKHNZLCBzTSwgc0QpKSxcbiAgICAgICAgICAgIHRUICAgICAgICAgICAgICAgICAgICAgID0gKyhuZXcgRGF0ZSksXG4gICAgICAgICAgICBkYXlzICAgICAgICAgICAgICAgICAgICA9IHBhcnNlSW50KCgrKG5ldyBEYXRlKSAtIHNUKSAvIDg2NGU1KSxcbiAgICAgICAgICAgIGNvb2wgICAgICAgICAgICAgICAgICAgID0gW1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqINCa0YDRg9Cz0LvRi9C1INC00LDRgtGLXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbmV3IENvb2xEYXRlKCsobmV3IERhdGUoc1kgKyAxLCBzTSwgc0QpKSwgXCLQk9C+0LRcIiwgQ29vbERhdGUuTU9OVEgpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29sRGF0ZSgrKG5ldyBEYXRlKHNZICsgMSwgc00gKyA2LCBzRCkpLCBcItCf0L7Qu9GC0L7RgNCwINCz0L7QtFwiLCBDb29sRGF0ZS5NT05USCksXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiDQktCw0LbQvdGL0LUg0YHQvtCx0YvRgtC40Y9cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBuZXcgQ29vbERhdGUoZmlyc3RJbXBvcnRhbnQoMSwgMTQpLCBcItCf0LXRgNCy0L7QtSBcXFwiMTQg0YTQtdCy0YDQsNC70Y9cXFwiINCy0LzQtdGB0YLQtVwiLCBDb29sRGF0ZS5JTVBPUlRBTlQpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29sRGF0ZShmaXJzdEltcG9ydGFudCgxLCAyMyksIFwi0J/QtdGA0LLQvtC1IFxcXCIyMyDRhNC10LLRgNCw0LvRj1xcXCIg0LLQvNC10YHRgtC1XCIsIENvb2xEYXRlLklNUE9SVEFOVCksXG4gICAgICAgICAgICAgICAgbmV3IENvb2xEYXRlKGZpcnN0SW1wb3J0YW50KDIsIDgpLCBcItCf0LXRgNCy0L7QtSBcXFwiOCDQvNCw0YDRgtCwXFxcIiDQstC80LXRgdGC0LVcIiwgQ29vbERhdGUuSU1QT1JUQU5UKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG5lYXJlc3QsXG4gICAgICAgICAgICBuZWFyZXN0TGVuZ3RoICAgICAgICAgICA9IDAsXG4gICAgICAgICAgICBuZWFyZXN0SXRlcmF0b3IgICAgICAgICA9IDAsXG4gICAgICAgICAgICBqc19zY3JvbGxfcG9zaXRpb24gICAgICA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHAsIGMsIHI7XG4gICAgICAgICAgICAgICAgcCA9IGpRdWVyeSgnLmpzLXNjcm9sbCcpO1xuICAgICAgICAgICAgICAgIGMgPSBwLmZpbmQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgciA9IChjLndpZHRoKCkgLSBwLndpZHRoKCkpIC8gMjtcblxuICAgICAgICAgICAgICAgIHAuc2Nyb2xsTGVmdChyKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgIGpzX3Njcm9sbF90aW1lciAgICAgICAgID0gKyhuZXcgRGF0ZSksXG4gICAgICAgICAgICBqc19zY3JvbGxfdGltZXJfaGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICsobmV3IERhdGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGpzX3Njcm9sbF90aW1lciArIDE1ZTIgPCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGpzX3Njcm9sbF90aW1lciA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYywgbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICog0JrRgNGD0LPQu9GL0LUg0LTQsNGC0YtcbiAgICAgICAgICovXG4gICAgICAgIGZvciAoYyA9IDE7IGMgPCAxMjsgYysrKSB7XG4gICAgICAgICAgICBjb29sLnB1c2gobmV3IENvb2xEYXRlKFxuICAgICAgICAgICAgICAgICsobmV3IERhdGUoc1ksIHNNICsgYywgc0QpKSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGMsXG4gICAgICAgICAgICAgICAgICAgIGMgPT0gNiA/IFwi0J/QvtC70LPQvtC00LBcIiA6ICQkXG4gICAgICAgICAgICAgICAgICAgICAgICAubWF0aChjKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC80LXRgdGP0YZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC80LXRgdGP0YbQsFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LzQtdGB0Y/RhtC10LJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpLFxuICAgICAgICAgICAgICAgIENvb2xEYXRlLk1PTlRIXG4gICAgICAgICAgICApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDQmtGA0YPQs9C70YvQtSDQtNCw0YLRi1xuICAgICAgICAgKi9cbiAgICAgICAgZm9yIChjID0gMjsgYyA8PSAxMDsgYysrKSB7XG4gICAgICAgICAgICBjb29sLnB1c2gobmV3IENvb2xEYXRlKFxuICAgICAgICAgICAgICAgICsobmV3IERhdGUoc1kgKyBjLCBzTSwgc0QpKSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGMsXG4gICAgICAgICAgICAgICAgICAgICQkXG4gICAgICAgICAgICAgICAgICAgICAgICAubWF0aChjKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItCz0L7QtFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LPQvtC00LBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC70LXRglwiXG4gICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIiksXG4gICAgICAgICAgICAgICAgQ29vbERhdGUuTU9OVEhcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqINCa0YDQsNGB0LjQstGL0LUg0YfQuNGB0LvQsFxuICAgICAgICAgKi9cbiAgICAgICAgZm9yIChjID0gMTAwLCBsID0gMzY2ICogMTA7IGMgPCBsOyBjKyspIHtcbiAgICAgICAgICAgIGlmIChjb29sTnVtYmVyKGMpKSB7XG4gICAgICAgICAgICAgICAgY29vbC5wdXNoKG5ldyBDb29sRGF0ZShzVCArIGMgKiA4NjRlNSxcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICQkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGgoYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGVjbGluYXRpb24oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00LXQvdGMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdGPXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdC10LlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgIENvb2xEYXRlLkNPVU5UXG4gICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb29sLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZWFyZXN0ID0gY29vbC5maWx0ZXIoZnVuY3Rpb24gKGNvb2wpIHtcbiAgICAgICAgICAgIGlmIChuZWFyZXN0TGVuZ3RoIDwgMTApIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5jZWlsKChjb29sLnRpbWVzdGFtcCAtIHRUKSAvIDg2NGU1KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lYXJlc3RMZW5ndGgrKztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkJC5sb2cobmVhcmVzdCk7XG5cbiAgICAgICAgJChcIi50aXRsZS5kYXlzXCIpXG4gICAgICAgICAgICAudGV4dChkYXlzKTtcblxuICAgICAgICAkKFwiLnRleHQgLmRheXNcIilcbiAgICAgICAgICAgIC50ZXh0KFxuICAgICAgICAgICAgICAgIFNsYXZ1bnlhXG4gICAgICAgICAgICAgICAgICAgIC5tYXRoKGRheXMpXG4gICAgICAgICAgICAgICAgICAgIC5kZWNsaW5hdGlvbihbXG4gICAgICAgICAgICAgICAgICAgICAgICBcItC00LXQvdGMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcItC00L3Rj1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC90LXQuVwiXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApO1xuXG5cbiAgICAgICAgZnVuY3Rpb24gbmVhcmVzdENoYW5nZShlKSB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChcIiNuZWFyZXN0XCIpXG4gICAgICAgICAgICAgICAgLmh0bWwobmVhcmVzdFtuZWFyZXN0SXRlcmF0b3JdICsgXCJcIik7XG5cbiAgICAgICAgICAgIGlmICghaXNTd3lwZSkge1xuICAgICAgICAgICAgICAgIGlzU3d5cGVPZmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG5lYXJlc3ROZXh0KGUpIHtcbiAgICAgICAgICAgIG5lYXJlc3RJdGVyYXRvciA9IG5lYXJlc3RJdGVyYXRvciA8IG5lYXJlc3QubGVuZ3RoIC0gMSA/IG5lYXJlc3RJdGVyYXRvciArIDEgOiAwO1xuICAgICAgICAgICAgbmVhcmVzdENoYW5nZShlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG5lYXJlc3RQcmV2KGUpIHtcbiAgICAgICAgICAgIG5lYXJlc3RJdGVyYXRvciA9IG5lYXJlc3RJdGVyYXRvciA+IDAgPyBuZWFyZXN0SXRlcmF0b3IgLSAxIDogbmVhcmVzdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgbmVhcmVzdENoYW5nZShlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoXCIjbmVhcmVzdFwiKVxuICAgICAgICAgICAgLmh0bWwobmVhcmVzdFtuZWFyZXN0SXRlcmF0b3JdICsgXCJcIik7XG5cblxuICAgICAgICAkKFwiI25lYXJlc3Qtd3JhcCAuanMtc2Nyb2xsXCIpXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCBuZWFyZXN0TmV4dClcbiAgICAgICAgICAgIC5vbihcImNvbnRleHRtZW51XCIsIG5lYXJlc3RQcmV2KVxuICAgICAgICAgICAgLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGpzX3Njcm9sbF90aW1lcl9oYW5kbGVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuc2Nyb2xsTGVmdCgpIDwganNfc2Nyb2xsX3Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWFyZXN0UHJldihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lYXJlc3ROZXh0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZi5zY3JvbGxMZWZ0KGpzX3Njcm9sbF9wb3NpdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkKFwiYm9keVwiKVxuICAgICAgICAgICAgLmRlbGF5KDJlMylcbiAgICAgICAgICAgIC5xdWV1ZShmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwicmVhZHlcIik7XG4gICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICB9KTtcblxufSkoalF1ZXJ5LCBTbGF2dW55YSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhciA9IG5ldyBQcm9ncmVzc0Jhci5QYXRoKCcjaGVhcnQtcGF0aCcsIHtcbiAgICAgICAgZWFzaW5nOiAgICdlYXNlSW5PdXQnLFxuICAgICAgICBkdXJhdGlvbjogMTQwMCAqIDJcbiAgICB9KTtcblxuICAgIGJhci5zZXQoLTEpO1xuICAgIGJhci5hbmltYXRlKDEpO1xufSkoKTtcbiJdfQ==
