!function(t,e){e.urlParams("debug")&&e.debug,t(function(){function n(t){return t.length}function o(t,e){return+new Date(f,t,e)>h?+new Date(f,t,e):+new Date(f+1,t,e)}function a(t){var e,n,o=(""+t).split(""),a=!0;for(e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1];if(a)return a;for(a=!0,e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1]+1;if(a)return a;for(a=!0,e=0,n=o.length-1;e<n;e++)a=a&&o[e]==o[e+1]-1;if(a)return a;for(a=!0,e=1,n=o.length;e<n;e++)a=a&&0==o[e];return a}!function(t){t.CoolDate=function(t,e,n){this.__timestamp=t,this.__title=e,this.__type=n.toLowerCase()},t.CoolDate.prototype={constructor:CoolDate,get timestamp(){return this.__timestamp},get title(){return this.__title},toString:function(){var t=Math.ceil((this.__timestamp-D)/864e5);return[0==t?"Сегодня":[1==t?"Завтра":2==t?"Послезавтра":["Через","<b>"+t+"</b>",Slavunya.math(t).declination(["день","дня","дней"]).toLowerCase()].join(" "),"будет"].join(" "),this.__type+":",this.__title+"."].join(" ")}},t.CoolDate.__defineGetter__("MONTH",function(){return"Круглая дата"}),t.CoolDate.__defineGetter__("COUNT",function(){return"Красивое количество дней"}),t.CoolDate.__defineGetter__("IMPORTANT",function(){return"Важное событие"})}(window);var i,r,l,u=location.hash.replace("#","").split("/").filter(n),s=parseInt(u[2])||11,c=(u[1]||8)-1,f=parseInt(u[0])||2016,h=+new Date(f,c,s),D=+new Date,_=parseInt((+new Date-h)/864e5),C=[new CoolDate((+new Date(f+1,c,s)),"Год",CoolDate.MONTH),new CoolDate((+new Date(f+1,c+6,s)),"Полтора год",CoolDate.MONTH),new CoolDate(o(1,14),'Первое "14 февраля" вместе',CoolDate.IMPORTANT),new CoolDate(o(1,23),'Первое "23 февраля" вместе',CoolDate.IMPORTANT),new CoolDate(o(2,8),'Первое "8 марта" вместе',CoolDate.IMPORTANT)],m=0,w=0;for(r=1;r<12;r++)C.push(new CoolDate((+new Date(f,c+r,s)),[r,6==с?"Полгода":e.math(r).declination(["месяц","месяца","месяцев"])].join(" "),CoolDate.MONTH));for(r=2;r<=10;r++)C.push(new CoolDate((+new Date(f+r,c,s)),[r,e.math(r).declination(["год","года","лет"])].join(" "),CoolDate.MONTH));for(r=100,l=3660;r<l;r++)a(r)&&C.push(new CoolDate(h+864e5*r,[r,e.math(r).declination(["день","дня","дней"])].join(" "),CoolDate.COUNT));C.sort(function(t,e){return t.timestamp-e.timestamp}),i=C.filter(function(t){return m<10&&(t.timestamp-D)/864e5>=0&&(m++,!0)}),e.log(i),t(".title.days").text(_),t(".text .days").text(Slavunya.math(_).declination(["день","дня","дней"])),t("#nearest").html(i[w]+"").on("click",function(){w=w<i.length-1?w+1:0,t(this).html(i[w]+"")}).on("contextmenu",function(e){e.preventDefault(),w=w>0?w-1:i.length-1,t(this).html(i[w]+"")}),t("body").delay(2e3).queue(function(e){t(this).addClass("ready"),e()})})}(jQuery,Slavunya),function(){var t=new ProgressBar.Path("#heart-path",{easing:"easeInOut",duration:2800});t.set(-1),t.animate(1)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIiQkIiwidXJsUGFyYW1zIiwiZGVidWciLCJub3RFbXB0eSIsIml0ZW0iLCJsZW5ndGgiLCJmaXJzdEltcG9ydGFudCIsIm0iLCJkIiwiRGF0ZSIsInNZIiwic1QiLCJjb29sTnVtYmVyIiwibnVtYmVyIiwiYyIsImwiLCJudW0iLCJzcGxpdCIsImJvb2wiLCJ3aW5kb3ciLCJDb29sRGF0ZSIsInRpbWVzdGFtcCIsInRpdGxlIiwidHlwZSIsInRoaXMiLCJfX3RpbWVzdGFtcCIsIl9fdGl0bGUiLCJfX3R5cGUiLCJ0b0xvd2VyQ2FzZSIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidG9TdHJpbmciLCJkYXlzIiwiTWF0aCIsImNlaWwiLCJ0VCIsIlNsYXZ1bnlhIiwibWF0aCIsImRlY2xpbmF0aW9uIiwiam9pbiIsIl9fZGVmaW5lR2V0dGVyX18iLCJuZWFyZXN0IiwiaEQiLCJsb2NhdGlvbiIsImhhc2giLCJyZXBsYWNlIiwiZmlsdGVyIiwic0QiLCJwYXJzZUludCIsInNNIiwiY29vbCIsIk1PTlRIIiwiSU1QT1JUQU5UIiwibmVhcmVzdExlbmd0aCIsIm5lYXJlc3RJdGVyYXRvciIsInB1c2giLCLRgSIsIkNPVU5UIiwic29ydCIsImEiLCJiIiwibG9nIiwidGV4dCIsImh0bWwiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRlbGF5IiwicXVldWUiLCJuZXh0IiwiYWRkQ2xhc3MiLCJqUXVlcnkiLCJiYXIiLCJQcm9ncmVzc0JhciIsIlBhdGgiLCJlYXNpbmciLCJkdXJhdGlvbiIsInNldCIsImFuaW1hdGUiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVdBLEVBQUdDLEdBRU5BLEVBQUdDLFVBQVUsVUFDYkQsRUFBR0UsTUFHUEgsRUFBRSxXQTBERSxRQUFTSSxHQUFTQyxHQUNkLE1BQU9BLEdBQUtDLE9BR2hCLFFBQVNDLEdBQWVDLEVBQUdDLEdBQ3ZCLE9BQUssR0FBS0MsTUFBS0MsRUFBSUgsRUFBR0Ms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LFdBQ1RWLEVBQWtCQSxFQUFrQmIsRUFBUXBDLE9BQVMsRUFBSWlELEVBQWtCLEVBQUksRUFFL0V2RCxFQUFFeUIsTUFDR3VDLEtBQUt0QixFQUFRYSxHQUFtQixNQUV4Q1UsR0FBRyxjQUFlLFNBQVVDLEdBQ3pCQSxFQUFFQyxpQkFFRlosRUFBa0JBLEVBQWtCLEVBQUlBLEVBQWtCLEVBQUliLEVBQVFwQyxPQUFTLEVBRS9FTixFQUFFeUIsTUFDR3VDLEtBQUt0QixFQUFRYSxHQUFtQixNQUc3Q3ZELEVBQUUsUUFDR29FLE1BQU0sS0FDTkMsTUFBTSxTQUFVQyxHQUNidEUsRUFBRXlCLE1BQ0c4QyxTQUFTLFNBQ2RELFNBS2JFLE9BQVFuQyxVQUVYLFdBQ0ksR0FBSW9DLEdBQU0sR0FBSUMsYUFBWUMsS0FBSyxlQUMzQkMsT0FBVSxZQUNWQyxTQUFVLE1BR2RKLEdBQUlLLEtBQUksR0FDUkwsRUFBSU0sUUFBUSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkLCAkJCkge1xuXG4gICAgaWYgKCQkLnVybFBhcmFtcyhcImRlYnVnXCIpKSB7XG4gICAgICAgICQkLmRlYnVnO1xuICAgIH1cblxuICAgICQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIChmdW5jdGlvbiAod2luZG93KSB7XG4gICAgICAgICAgICB3aW5kb3cuQ29vbERhdGUgPSBmdW5jdGlvbiBDb29sRGF0ZSh0aW1lc3RhbXAsIHRpdGxlLCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3RpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdGl0bGUgICAgID0gdGl0bGU7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3R5cGUgICAgICA9IHR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHdpbmRvdy5Db29sRGF0ZS5wcm90b3R5cGUgPSB7XG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3I6IENvb2xEYXRlLFxuXG4gICAgICAgICAgICAgICAgZ2V0IHRpbWVzdGFtcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX190aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXQgdGl0bGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fdGl0bGU7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXlzID0gTWF0aC5jZWlsKCh0aGlzLl9fdGltZXN0YW1wIC0gdFQpIC8gODY0ZTUpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAoZGF5cyA9PSAwID8gXCLQodC10LPQvtC00L3Rj1wiIDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheXMgPT0gMSA/IFwi0JfQsNCy0YLRgNCwXCIgOiBkYXlzID09IDIgPyBcItCf0L7RgdC70LXQt9Cw0LLRgtGA0LBcIiA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQp9C10YDQtdC3XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxiPlwiICsgZGF5cyArIFwiPC9iPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2xhdnVueWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWF0aChkYXlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kZWNsaW5hdGlvbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQtdC90YxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC90Y9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC90LXQuVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItCx0YPQtNC10YJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHlwZSArIFwiOlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RpdGxlICsgXCIuXCJcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB3aW5kb3cuQ29vbERhdGUuX19kZWZpbmVHZXR0ZXJfXyhcIk1PTlRIXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLQmtGA0YPQs9C70LDRjyDQtNCw0YLQsFwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3aW5kb3cuQ29vbERhdGUuX19kZWZpbmVHZXR0ZXJfXyhcIkNPVU5UXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLQmtGA0LDRgdC40LLQvtC1INC60L7Qu9C40YfQtdGB0YLQstC+INC00L3QtdC5XCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5Db29sRGF0ZS5fX2RlZmluZUdldHRlcl9fKFwiSU1QT1JUQU5UXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLQktCw0LbQvdC+0LUg0YHQvtCx0YvRgtC40LVcIjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pKHdpbmRvdyk7XG5cbiAgICAgICAgZnVuY3Rpb24gbm90RW1wdHkoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGVuZ3RoXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaXJzdEltcG9ydGFudChtLCBkKSB7XG4gICAgICAgICAgICBpZiAoKyhuZXcgRGF0ZShzWSwgbSwgZCkpID4gc1QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKyhuZXcgRGF0ZShzWSwgbSwgZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICsobmV3IERhdGUoc1kgKyAxLCBtLCBkKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjb29sTnVtYmVyKG51bWJlcikge1xuICAgICAgICAgICAgdmFyIG51bSAgPSAoXCJcIiArIG51bWJlcikuc3BsaXQoXCJcIiksXG4gICAgICAgICAgICAgICAgYm9vbCA9IHRydWUsXG4gICAgICAgICAgICAgICAgYywgbDtcblxuICAgICAgICAgICAgZm9yIChjID0gMCwgbCA9IG51bS5sZW5ndGggLSAxOyBjIDwgbDsgYysrKSB7XG4gICAgICAgICAgICAgICAgYm9vbCA9IGJvb2wgJiYgbnVtW2NdID09IG51bVtjICsgMV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvb2wgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGMgPSAwLCBsID0gbnVtLmxlbmd0aCAtIDE7IGMgPCBsOyBjKyspIHtcbiAgICAgICAgICAgICAgICBib29sID0gYm9vbCAmJiBudW1bY10gPT0gbnVtW2MgKyAxXSArIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvb2wgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGMgPSAwLCBsID0gbnVtLmxlbmd0aCAtIDE7IGMgPCBsOyBjKyspIHtcbiAgICAgICAgICAgICAgICBib29sID0gYm9vbCAmJiBudW1bY10gPT0gbnVtW2MgKyAxXSAtIDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvb2wgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGMgPSAxLCBsID0gbnVtLmxlbmd0aDsgYyA8IGw7IGMrKykge1xuICAgICAgICAgICAgICAgIGJvb2wgPSBib29sICYmIG51bVtjXSA9PSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoRCAgICAgICAgICAgICAgPSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpLnNwbGl0KFwiL1wiKS5maWx0ZXIobm90RW1wdHkpLFxuICAgICAgICAgICAgc0QgICAgICAgICAgICAgID0gcGFyc2VJbnQoaERbMl0pIHx8IDExLFxuICAgICAgICAgICAgc00gICAgICAgICAgICAgID0gKGhEWzFdIHx8IDgpIC0gMSxcbiAgICAgICAgICAgIHNZICAgICAgICAgICAgICA9IHBhcnNlSW50KGhEWzBdKSB8fCAyMDE2LFxuICAgICAgICAgICAgc1QgICAgICAgICAgICAgID0gKyhuZXcgRGF0ZShzWSwgc00sIHNEKSksXG4gICAgICAgICAgICB0VCAgICAgICAgICAgICAgPSArKG5ldyBEYXRlKSxcbiAgICAgICAgICAgIGRheXMgICAgICAgICAgICA9IHBhcnNlSW50KCgrKG5ldyBEYXRlKSAtIHNUKSAvIDg2NGU1KSxcbiAgICAgICAgICAgIGNvb2wgICAgICAgICAgICA9IFtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiDQmtGA0YPQs9C70YvQtSDQtNCw0YLRi1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIG5ldyBDb29sRGF0ZSgrKG5ldyBEYXRlKHNZICsgMSwgc00sIHNEKSksIFwi0JPQvtC0XCIsIENvb2xEYXRlLk1PTlRIKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vbERhdGUoKyhuZXcgRGF0ZShzWSArIDEsIHNNICsgNiwgc0QpKSwgXCLQn9C+0LvRgtC+0YDQsCDQs9C+0LRcIiwgQ29vbERhdGUuTU9OVEgpLFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICog0JLQsNC20L3Ri9C1INGB0L7QsdGL0YLQuNGPXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbmV3IENvb2xEYXRlKGZpcnN0SW1wb3J0YW50KDEsIDE0KSwgXCLQn9C10YDQstC+0LUgXFxcIjE0INGE0LXQstGA0LDQu9GPXFxcIiDQstC80LXRgdGC0LVcIiwgQ29vbERhdGUuSU1QT1JUQU5UKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vbERhdGUoZmlyc3RJbXBvcnRhbnQoMSwgMjMpLCBcItCf0LXRgNCy0L7QtSBcXFwiMjMg0YTQtdCy0YDQsNC70Y9cXFwiINCy0LzQtdGB0YLQtVwiLCBDb29sRGF0ZS5JTVBPUlRBTlQpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29sRGF0ZShmaXJzdEltcG9ydGFudCgyLCA4KSwgXCLQn9C10YDQstC+0LUgXFxcIjgg0LzQsNGA0YLQsFxcXCIg0LLQvNC10YHRgtC1XCIsIENvb2xEYXRlLklNUE9SVEFOVClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBuZWFyZXN0LFxuICAgICAgICAgICAgbmVhcmVzdExlbmd0aCAgID0gMCxcbiAgICAgICAgICAgIG5lYXJlc3RJdGVyYXRvciA9IDAsXG4gICAgICAgICAgICBjLCBsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDQmtGA0YPQs9C70YvQtSDQtNCw0YLRi1xuICAgICAgICAgKi9cbiAgICAgICAgZm9yIChjID0gMTsgYyA8IDEyOyBjKyspIHtcbiAgICAgICAgICAgIGNvb2wucHVzaChuZXcgQ29vbERhdGUoXG4gICAgICAgICAgICAgICAgKyhuZXcgRGF0ZShzWSwgc00gKyBjLCBzRCkpLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgYyxcbiAgICAgICAgICAgICAgICAgICAg0YEgPT0gNiA/IFwi0J/QvtC70LPQvtC00LBcIiA6ICQkXG4gICAgICAgICAgICAgICAgICAgICAgICAubWF0aChjKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC80LXRgdGP0YZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC80LXRgdGP0YbQsFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LzQtdGB0Y/RhtC10LJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpLFxuICAgICAgICAgICAgICAgIENvb2xEYXRlLk1PTlRIXG4gICAgICAgICAgICApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDQmtGA0YPQs9C70YvQtSDQtNCw0YLRi1xuICAgICAgICAgKi9cbiAgICAgICAgZm9yIChjID0gMjsgYyA8PSAxMDsgYysrKSB7XG4gICAgICAgICAgICBjb29sLnB1c2gobmV3IENvb2xEYXRlKFxuICAgICAgICAgICAgICAgICsobmV3IERhdGUoc1kgKyBjLCBzTSwgc0QpKSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGMsXG4gICAgICAgICAgICAgICAgICAgICQkXG4gICAgICAgICAgICAgICAgICAgICAgICAubWF0aChjKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRlY2xpbmF0aW9uKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItCz0L7QtFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LPQvtC00LBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC70LXRglwiXG4gICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIiksXG4gICAgICAgICAgICAgICAgQ29vbERhdGUuTU9OVEhcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqINCa0YDQsNGB0LjQstGL0LUg0YfQuNGB0LvQsFxuICAgICAgICAgKi9cbiAgICAgICAgZm9yIChjID0gMTAwLCBsID0gMzY2ICogMTA7IGMgPCBsOyBjKyspIHtcbiAgICAgICAgICAgIGlmIChjb29sTnVtYmVyKGMpKSB7XG4gICAgICAgICAgICAgICAgY29vbC5wdXNoKG5ldyBDb29sRGF0ZShzVCArIGMgKiA4NjRlNSxcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICQkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGgoYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGVjbGluYXRpb24oW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcItC00LXQvdGMXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdGPXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdC10LlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgIENvb2xEYXRlLkNPVU5UXG4gICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb29sLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZWFyZXN0ID0gY29vbC5maWx0ZXIoZnVuY3Rpb24gKGNvb2wpIHtcbiAgICAgICAgICAgIGlmIChuZWFyZXN0TGVuZ3RoIDwgMTApIHtcbiAgICAgICAgICAgICAgICBpZiAoKGNvb2wudGltZXN0YW1wIC0gdFQpIC8gODY0ZTUgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZWFyZXN0TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCQubG9nKG5lYXJlc3QpO1xuXG4gICAgICAgICQoXCIudGl0bGUuZGF5c1wiKVxuICAgICAgICAgICAgLnRleHQoZGF5cyk7XG5cbiAgICAgICAgJChcIi50ZXh0IC5kYXlzXCIpXG4gICAgICAgICAgICAudGV4dChcbiAgICAgICAgICAgICAgICBTbGF2dW55YVxuICAgICAgICAgICAgICAgICAgICAubWF0aChkYXlzKVxuICAgICAgICAgICAgICAgICAgICAuZGVjbGluYXRpb24oW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC10L3RjFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCLQtNC90Y9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwi0LTQvdC10LlcIlxuICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAkKFwiI25lYXJlc3RcIilcbiAgICAgICAgICAgIC5odG1sKG5lYXJlc3RbbmVhcmVzdEl0ZXJhdG9yXSArIFwiXCIpXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbmVhcmVzdEl0ZXJhdG9yID0gbmVhcmVzdEl0ZXJhdG9yIDwgbmVhcmVzdC5sZW5ndGggLSAxID8gbmVhcmVzdEl0ZXJhdG9yICsgMSA6IDA7XG5cbiAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKG5lYXJlc3RbbmVhcmVzdEl0ZXJhdG9yXSArIFwiXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgbmVhcmVzdEl0ZXJhdG9yID0gbmVhcmVzdEl0ZXJhdG9yID4gMCA/IG5lYXJlc3RJdGVyYXRvciAtIDEgOiBuZWFyZXN0Lmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKG5lYXJlc3RbbmVhcmVzdEl0ZXJhdG9yXSArIFwiXCIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJChcImJvZHlcIilcbiAgICAgICAgICAgIC5kZWxheSgyZTMpXG4gICAgICAgICAgICAucXVldWUoZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcInJlYWR5XCIpO1xuICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pKGpRdWVyeSwgU2xhdnVueWEpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIHZhciBiYXIgPSBuZXcgUHJvZ3Jlc3NCYXIuUGF0aCgnI2hlYXJ0LXBhdGgnLCB7XG4gICAgICAgIGVhc2luZzogICAnZWFzZUluT3V0JyxcbiAgICAgICAgZHVyYXRpb246IDE0MDAgKiAyXG4gICAgfSk7XG5cbiAgICBiYXIuc2V0KC0xKTtcbiAgICBiYXIuYW5pbWF0ZSgxKTtcbn0pKCk7XG4iXX0=
