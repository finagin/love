{"version":3,"sources":["main.js"],"names":["$","$$","urlParams","debug","notEmpty","item","length","firstImportant","m","d","Date","sY","sT","coolNumber","number","c","l","num","split","bool","window","CoolDate","timestamp","title","type","this","__timestamp","__title","__type","toLowerCase","prototype","constructor","toString","days","Math","ceil","tT","Slavunya","math","declination","join","__defineGetter__","nearest","isSwype","isSwypeId","setInterval","toggleClass","isSwypeOff","clearInterval","removeClass","hD","location","hash","replace","filter","sD","parseInt","sM","cool","MONTH","IMPORTANT","nearestLength","push","COUNT","sort","a","b","log","text","forEach","append","addClass","html","Swiper","loop","runCallbacksOnInit","onSlidePrevEnd","onSlideNextEnd","delay","queue","next","jQuery","bar","ProgressBar","Path","easing","duration","set","animate"],"mappings":"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","file":"main.js","sourcesContent":["(function ($, $$) {\n\n    if ($$.urlParams(\"debug\")) {\n        $$.debug;\n    }\n\n    $(function () {\n\n        (function (window) {\n            window.CoolDate = function CoolDate(timestamp, title, type) {\n                this.__timestamp = timestamp;\n                this.__title = title;\n                this.__type = type.toLowerCase();\n            };\n\n            window.CoolDate.prototype = {\n                constructor: CoolDate,\n\n                get timestamp() {\n                    return this.__timestamp;\n                },\n                get title() {\n                    return this.__title;\n                },\n\n                toString: function () {\n                    var days = Math.ceil((this.__timestamp - tT) / 864e5);\n\n                    return [\n                        (days == 0 ? \"Сегодня\" : [\n                                days == 1 ? \"Завтра\" : days == 2 ? \"Послезавтра\" : (\n                                            [\n                                                \"Через\",\n                                                \"<b>\" + days + \"</b>\",\n                                                Slavunya\n                                                    .math(days)\n                                                    .declination([\n                                                        \"день\",\n                                                        \"дня\",\n                                                        \"дней\"\n                                                    ])\n                                                    .toLowerCase()\n                                            ].join(\" \")\n                                        ),\n                                \"будет\"\n                            ].join(\" \")),\n                        this.__type + \":\",\n                        this.__title + \".\"\n                    ].join(\" \");\n                }\n            };\n\n            window.CoolDate.__defineGetter__(\"MONTH\", function () {\n                return \"Круглая дата\";\n            });\n            window.CoolDate.__defineGetter__(\"COUNT\", function () {\n                return \"Красивое количество дней\";\n            });\n            window.CoolDate.__defineGetter__(\"IMPORTANT\", function () {\n                return \"Важное событие\";\n            });\n\n        })(window);\n\n        function notEmpty(item) {\n            return item.length\n        }\n\n        function firstImportant(m, d) {\n            if (+(new Date(sY, m, d)) > sT) {\n                return +(new Date(sY, m, d));\n            }\n            return +(new Date(sY + 1, m, d));\n        }\n\n        function coolNumber(number) {\n            var num = (\"\" + number).split(\"\"),\n                bool = true,\n                c, l;\n\n            for (c = 0, l = num.length - 1; c < l; c++) {\n                bool = bool && num[c] == num[c + 1];\n            }\n\n            if (bool) {\n                return bool;\n            } else {\n                bool = true;\n            }\n\n            for (c = 0, l = num.length - 1; c < l; c++) {\n                bool = bool && num[c] == num[c + 1] + 1;\n            }\n\n            if (bool) {\n                return bool;\n            } else {\n                bool = true;\n            }\n\n            for (c = 0, l = num.length - 1; c < l; c++) {\n                bool = bool && num[c] == num[c + 1] - 1;\n            }\n\n            if (bool) {\n                return bool;\n            } else {\n                bool = true;\n            }\n\n            for (c = 1, l = num.length; c < l; c++) {\n                bool = bool && num[c] == 0;\n            }\n\n            return bool;\n        }\n\n        var isSwype = false,\n            isSwypeId = setInterval(function () {\n                $(\"#nearest-wrap\")\n                    .toggleClass(\"swing\");\n            }, 2e3),\n            isSwypeOff = function () {\n                if (!isSwype) {\n                    isSwype = true;\n                    clearInterval(isSwypeId);\n                    $(\"#nearest-wrap\")\n                        .removeClass(\"swing\");\n                }\n            },\n\n            hD = location.hash.replace(\"#\", \"\").split(\"/\").filter(notEmpty),\n            sD = parseInt(hD[2]) || 11,\n            sM = (hD[1] || 8) - 1,\n            sY = parseInt(hD[0]) || 2016,\n            sT = +(new Date(sY, sM, sD)),\n            tT = +(new Date),\n            days = parseInt((+(new Date) - sT) / 864e5),\n            cool = [\n                /**\n                 * Круглые даты\n                 */\n                new CoolDate(+(new Date(sY + 1, sM, sD)), \"Год\", CoolDate.MONTH),\n                new CoolDate(+(new Date(sY + 1, sM + 6, sD)), \"Полтора год\", CoolDate.MONTH),\n\n                /**\n                 * Важные события\n                 */\n                new CoolDate(firstImportant(1, 14), \"Первое \\\"14 февраля\\\" вместе\", CoolDate.IMPORTANT),\n                new CoolDate(firstImportant(1, 23), \"Первое \\\"23 февраля\\\" вместе\", CoolDate.IMPORTANT),\n                new CoolDate(firstImportant(2, 8), \"Первое \\\"8 марта\\\" вместе\", CoolDate.IMPORTANT)\n            ],\n            nearest,\n            nearestLength = 0,\n            c, l;\n\n        /**\n         * Круглые даты\n         */\n        for (c = 1; c < 12; c++) {\n            cool.push(new CoolDate(\n                +(new Date(sY, sM + c, sD)),\n                [\n                    c == 6 ? \"\" : c,\n                    c == 6 ? \"Полгода\" : $$\n                            .math(c)\n                            .declination([\n                                \"месяц\",\n                                \"месяца\",\n                                \"месяцев\"\n                            ])\n                ].join(\" \"),\n                CoolDate.MONTH\n            ));\n        }\n\n        /**\n         * Круглые даты\n         */\n        for (c = 2; c <= 10; c++) {\n            cool.push(new CoolDate(\n                +(new Date(sY + c, sM, sD)),\n                [\n                    c,\n                    $$\n                        .math(c)\n                        .declination([\n                            \"год\",\n                            \"года\",\n                            \"лет\"\n                        ])\n                ].join(\" \"),\n                CoolDate.MONTH\n            ));\n        }\n\n        /**\n         * Красивые числа\n         */\n        for (c = 100, l = 366 * 10; c < l; c++) {\n            if (coolNumber(c)) {\n                cool.push(new CoolDate(sT + c * 864e5,\n                    [\n                        c,\n                        $$\n                            .math(c)\n                            .declination([\n                                \"день\",\n                                \"дня\",\n                                \"дней\"\n                            ])\n                    ].join(\" \"),\n                    CoolDate.COUNT\n                ));\n            }\n        }\n\n        /**\n         * Личные даты\n         */\n        if (!location.hash.length) {\n            cool.push(new CoolDate(+(new Date(2017, 6, 29)), \"Возвращение с практики\", CoolDate.IMPORTANT));\n        }\n\n        cool.sort(function (a, b) {\n            return a.timestamp - b.timestamp;\n        });\n\n        nearest = cool.filter(function (cool) {\n            if (nearestLength < 10) {\n                if (Math.ceil((cool.timestamp - tT) / 864e5) >= 0) {\n                    nearestLength++;\n                    return true;\n                }\n            }\n            return false;\n        });\n\n        $$.log(nearest);\n\n        $(\".title.days\")\n            .text(days);\n\n        $(\".text .days\")\n            .text(\n                Slavunya\n                    .math(days)\n                    .declination([\n                        \"день\",\n                        \"дня\",\n                        \"дней\"\n                    ])\n            );\n\n        nearest.forEach(function (item) {\n            $(\"#nearest\")\n                .append(\n                    $(\"<div>\")\n                        .addClass(\"swiper-slide\")\n                        .html(item + \"\")\n                );\n        });\n\n        new Swiper('.swiper-container', {\n            loop: true,\n            runCallbacksOnInit: false,\n            onSlidePrevEnd: isSwypeOff,\n            onSlideNextEnd: isSwypeOff\n        });\n\n        $(\"body\")\n            .delay(2e3)\n            .queue(function (next) {\n                $(this)\n                    .addClass(\"ready\");\n                next();\n            });\n    });\n\n})(jQuery, Slavunya);\n\n(function () {\n    var bar = new ProgressBar.Path('#heart-path', {\n        easing: 'easeInOut',\n        duration: 1400 * 2\n    });\n\n    bar.set(-1);\n    bar.animate(1);\n})();\n"]}