{"version":3,"sources":["main.js"],"names":["$","$$","urlParams","debug","randomInteger","min","max","rand","Math","random","floor","move","x","color","selector","color_1","color_2","css","left","height","horror","timeout","setTimeout","__horror","iter","notEmpty","item","length","firstImportant","m","d","Date","sY","sT","coolNumber","number","c","l","num","split","bool","window","CoolDate","timestamp","title","type","this","__timestamp","__title","__type","toLowerCase","prototype","constructor","toString","days","ceil","tT","math","declination","join","__defineGetter__","nearest","isSwype","isSwypeId","setInterval","toggleClass","isSwypeOff","clearInterval","removeClass","hD","location","hash","replace","filter","sD","parseInt","sM","cool","MONTH","IMPORTANT","nearestLength","console","log","hasClass","horrorInterval","html","position","append","addClass","text","push","COUNT","sort","a","b","forEach","Swiper","loop","runCallbacksOnInit","onSlidePrevEnd","onSlideNextEnd","delay","queue","next","jQuery","Slavunya","bar","ProgressBar","Path","easing","duration","set","animate"],"mappings":"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","file":"main.js","sourcesContent":["(function ($, $$) {\n\n    if ($$.urlParams(\"debug\")) {\n        $$.debug;\n    }\n\n    $(function () {\n\n        (function (window) {\n            window.CoolDate = function CoolDate(timestamp, title, type) {\n                this.__timestamp = timestamp;\n                this.__title = title;\n                this.__type = type.toLowerCase();\n            };\n\n            window.CoolDate.prototype = {\n                constructor: CoolDate,\n\n                get timestamp() {\n                    return this.__timestamp;\n                },\n                get title() {\n                    return this.__title;\n                },\n\n                toString: function () {\n                    var days = Math.ceil((this.__timestamp - tT) / 864e5);\n\n                    return [\n                        (days == 0 ? \"Сегодня\" : [\n                            days == 1 ? \"Завтра\" : days == 2 ? \"Послезавтра\" : (\n                                [\n                                    \"Через\",\n                                    \"<b>\" + days + \"</b>\",\n                                    $$\n                                        .math(days)\n                                        .declination([\n                                            \"день\",\n                                            \"дня\",\n                                            \"дней\"\n                                        ])\n                                        .toLowerCase()\n                                ].join(\" \")\n                            ),\n                            \"будет\"\n                        ].join(\" \")),\n                        this.__type + \":\",\n                        this.__title + \".\"\n                    ].join(\" \");\n                }\n            };\n\n            window.CoolDate.__defineGetter__(\"MONTH\", function () {\n                return \"Круглая дата\";\n            });\n            window.CoolDate.__defineGetter__(\"COUNT\", function () {\n                return \"Красивое количество дней\";\n            });\n            window.CoolDate.__defineGetter__(\"IMPORTANT\", function () {\n                return \"Важное событие\";\n            });\n\n        })(window);\n\n        function randomInteger(min, max) {\n            var rand = min + Math.random() * (max + 1 - min);\n            rand = Math.floor(rand);\n            return rand;\n        }\n\n        function move(x, color) {\n            var selector = \".title.lost\",\n                color_1 = 0,\n                color_2 = 0;\n\n            if (color) {\n                color_1 = color;\n                color_2 = 200 - color;\n            }\n\n\n            $(selector + \":nth-child(even)\")\n                .css({\n                    \"left\": (-x) + \"px\",\n                    \"height\": randomInteger(40, 70) + \"%\",\n                    \"color\": \"rgb(\" + color_1 + \",\" + color_1 + \",\" + color_1 + \")\"\n                });\n\n            $(selector + \":nth-child(odd)\")\n                .css({\n                    \"left\": x + \"px\",\n                    \"color\": \"rgb(\" + color_2 + \",\" + color_2 + \",\" + color_2 + \")\"\n                });\n        }\n\n        function horror(timeout) {\n            setTimeout(__horror(randomInteger(4, 10)), timeout);\n        }\n\n        function __horror(iter) {\n            if (iter) {\n                return function () {\n                    move(randomInteger(-4, 4), randomInteger(50, 150));\n                    setTimeout(__horror(--iter), randomInteger(40, 180));\n                }\n            } else {\n                return function () {\n                    move(0);\n                    setTimeout(function () {\n                        horror(randomInteger(2e3, 6e3));\n                    }, randomInteger(50, 200));\n                }\n            }\n        }\n\n        function notEmpty(item) {\n            return item.length\n        }\n\n        function firstImportant(m, d) {\n            if (+(new Date(sY, m, d)) > sT) {\n                return +(new Date(sY, m, d));\n            }\n            return +(new Date(sY + 1, m, d));\n        }\n\n        function coolNumber(number) {\n            var num = (\"\" + number).split(\"\"),\n                bool = true,\n                c, l;\n\n            for (c = 0, l = num.length - 1; c < l; c++) {\n                bool = bool && num[c] == num[c + 1];\n            }\n\n            if (bool) {\n                return bool;\n            } else {\n                bool = true;\n            }\n\n            for (c = 0, l = num.length - 1; c < l; c++) {\n                bool = bool && num[c] == num[c + 1] + 1;\n            }\n\n            if (bool) {\n                return bool;\n            } else {\n                bool = true;\n            }\n\n            for (c = 0, l = num.length - 1; c < l; c++) {\n                bool = bool && num[c] == num[c + 1] - 1;\n            }\n\n            if (bool) {\n                return bool;\n            } else {\n                bool = true;\n            }\n\n            for (c = 1, l = num.length; c < l; c++) {\n                bool = bool && num[c] == 0;\n            }\n\n            return bool;\n        }\n\n        var isSwype = false,\n            isSwypeId = setInterval(function () {\n                $(\"#nearest-wrap\")\n                    .toggleClass(\"swing\");\n            }, 2e3),\n            isSwypeOff = function () {\n                if (!isSwype) {\n                    isSwype = true;\n                    clearInterval(isSwypeId);\n                    $(\"#nearest-wrap\")\n                        .removeClass(\"swing\");\n                }\n            },\n\n            hD = location.hash.replace(\"#\", \"\").split(\"/\").filter(notEmpty),\n            sD = parseInt(hD[2]) || 14,\n            sM = (hD[1] || 2) - 1,\n            sY = parseInt(hD[0]) || 2019,\n            sT = +(new Date(sY, sM, sD)),\n            tT = +(new Date),\n            days = parseInt((+(new Date) - sT) / 864e5),\n            cool = [\n                /**\n                 * Круглые даты\n                 */\n                new CoolDate(+(new Date(sY + 1, sM, sD)), \"Год\", CoolDate.MONTH),\n                new CoolDate(+(new Date(sY + 1, sM + 6, sD)), \"Полтора год\", CoolDate.MONTH),\n\n                /**\n                 * Важные события\n                 */\n                new CoolDate(firstImportant(1, 14), \"Первое \\\"14 февраля\\\" вместе\", CoolDate.IMPORTANT),\n                new CoolDate(firstImportant(1, 23), \"Первое \\\"23 февраля\\\" вместе\", CoolDate.IMPORTANT),\n                new CoolDate(firstImportant(2, 8), \"Первое \\\"8 марта\\\" вместе\", CoolDate.IMPORTANT)\n            ],\n            nearest,\n            nearestLength = 0,\n            c, l;\n\n        console.log($('.content').hasClass('lost'), hD.length < 3, hD);\n\n        if ($('.content').hasClass('lost') && hD.length < 3) {\n            window.horrorInterval = setInterval(function () {\n                if ($(\"body\").hasClass('ready')) {\n                    clearInterval(window.horrorInterval);\n                    $('.content')\n                        .html('')\n                        .css({\n                            \"position\": \"relative\"\n                        })\n                        .append(\n                            $('<div>')\n                                .addClass('title')\n                                .addClass('lost')\n                                .text('Love is lost.')\n                        )\n                        .append(\n                            $('<div>')\n                                .addClass('title')\n                                .addClass('lost')\n                                .text('Love is lost.')\n                        )\n                        .append(\n                            $('<div>')\n                                .addClass('title')\n                                .addClass('mask')\n                                .text('Love is lost.')\n                        );\n                    horror(100);\n                }\n            }, 100);\n        }\n\n        /**\n         * Круглые даты\n         */\n        for (c = 1; c < 12; c++) {\n            cool.push(new CoolDate(\n                +(new Date(sY, sM + c, sD)),\n                [\n                    c == 6 ? \"\" : c,\n                    c == 6 ? \"Полгода\" : $$\n                        .math(c)\n                        .declination([\n                            \"месяц\",\n                            \"месяца\",\n                            \"месяцев\"\n                        ])\n                ].join(\" \"),\n                CoolDate.MONTH\n            ));\n        }\n\n        /**\n         * Круглые даты\n         */\n        for (c = 2; c <= 10; c++) {\n            cool.push(new CoolDate(\n                +(new Date(sY + c, sM, sD)),\n                [\n                    c,\n                    $$\n                        .math(c)\n                        .declination([\n                            \"год\",\n                            \"года\",\n                            \"лет\"\n                        ])\n                ].join(\" \"),\n                CoolDate.MONTH\n            ));\n        }\n\n        /**\n         * Красивые числа\n         */\n        for (c = 100, l = 366 * 10; c < l; c++) {\n            if (coolNumber(c)) {\n                cool.push(new CoolDate(sT + c * 864e5,\n                    [\n                        c,\n                        $$\n                            .math(c)\n                            .declination([\n                                \"день\",\n                                \"дня\",\n                                \"дней\"\n                            ])\n                    ].join(\" \"),\n                    CoolDate.COUNT\n                ));\n            }\n        }\n\n        /**\n         * Личные даты\n         */\n        if (!location.hash.length) {\n            cool.push(new CoolDate(+(new Date(2017, 6, 29)), \"Возвращение с практики\", CoolDate.IMPORTANT));\n        }\n\n        cool.sort(function (a, b) {\n            return a.timestamp - b.timestamp;\n        });\n\n        nearest = cool.filter(function (cool) {\n            if (nearestLength < 10) {\n                if (Math.ceil((cool.timestamp - tT) / 864e5) >= 0) {\n                    nearestLength++;\n                    return true;\n                }\n            }\n            return false;\n        });\n\n        $$.log(nearest);\n\n        $(\".title.days\")\n            .text(days);\n\n        $(\".text .days\")\n            .text(\n                $$\n                    .math(days)\n                    .declination([\n                        \"день\",\n                        \"дня\",\n                        \"дней\"\n                    ])\n            );\n\n        nearest.forEach(function (item) {\n            $(\"#nearest\")\n                .append(\n                    $(\"<div>\")\n                        .addClass(\"swiper-slide\")\n                        .html(item + \"\")\n                );\n        });\n\n        new Swiper('.swiper-container', {\n            loop: true,\n            runCallbacksOnInit: false,\n            onSlidePrevEnd: isSwypeOff,\n            onSlideNextEnd: isSwypeOff\n        });\n\n        $(\"body\")\n            .delay(2e3)\n            .queue(function (next) {\n                $(this)\n                    .addClass(\"ready\");\n                next();\n            });\n    });\n\n})(jQuery, Slavunya);\n\n(function () {\n    var bar = new ProgressBar.Path('#heart-path', {\n        easing: 'easeInOut',\n        duration: 1400 * 2\n    });\n\n    bar.set(-1);\n    bar.animate(1);\n})();\n"]}