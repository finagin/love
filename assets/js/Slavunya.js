!function(t,e,n){t.Slavunya=new function(){this.__defineGetter__("initTool",function(){function t(t,n){return e.__defineGetter__.apply(e,arguments),e}var e=this;return t}),this.__defineGetter__("regExp",function(){function t(t,r){var i,a=n;if(!t||!e[t])return a;if(r){for(i in e[t])if(a=r.match(e[t][i]))return a;return n}return e[t]}var e={phone:[/^((?:\+7|8)\s*(?:\((\d{3})\)|(\d{3})))?\s*(\d{3}[\s-]?\d{2}[\s-]?\d{2})$/]};return t}),this.__defineGetter__("getRGB",function(){function t(t){var e;return t&&isArray(t)&&3==t.length?t:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3])]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:void 0}return t}),this.__defineGetter__("cookies",function(){function n(){r={};for(var t=e.cookie.split(";"),n=/^[\s]*([^\s]+?)$/i,i=0,a=t.length;i<a;i++){var o=t[i].split("=");2==o.length&&(r[o[0].match(n)[1]]=unescape(o[1].match(n)?o[1].match(n)[1]:""))}}function r(i,a,o,s){var f,u,c;if(!a)return n(),i?r[i]:r;if(f="",o){var h=new Date;h.setTime(h.getTime()+24*o*60*60*1e3),f="; expires="+h.toGMTString()}u=t.location.hostname,c=t.location.protocol,e.cookie=""+i+"="+escape(a)+f+"; path=/"+(u?"; domain=."+u:"")+(s&&"https:"==c?"; secure":"")}return r}),this.__defineGetter__("math",function(){return function(t){var e=this.math;return fn={in:function(e){var n;return n=Array.isArray(e)?e:Array.from(arguments),n.indexOf(t)!==-1},between:function(e,n){return e<t&&t<n},right:function(e){var n,r=Math.pow(10,e||1);return n=t/r,n-=Math.floor(n),n*=r,Math.round(n)},declination:function(t){var n=this.right(1),r=this.right(2);return 1!=n||e(r).between(10,20)?e(n).in(2,3,4)&&!e(r).between(10,20)?t[1]:t[2]:t[0]}},fn}}),this.__defineGetter__("urlParams",function(){function t(t){var e={},n=location.href,r=n.indexOf("?")!=-1?n.indexOf("?"):n.indexOf("#")!=-1&&n.indexOf("#");return r!==!1&&n.slice(r+1).replace(/[?#]/,"&").split("&").forEach(function(t){t=t.split("="),e[t[0]]=t[1]||!0}),t?e[t]||null:e}return t})}}(window,document,void 0);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNsYXZ1bnlhLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiU2xhdnVueWEiLCJ0aGlzIiwiX19kZWZpbmVHZXR0ZXJfXyIsImluaXRUb29sIiwibmFtZSIsImdlbmVyYXRvciIsInNlbGYiLCJhcHBseSIsImFyZ3VtZW50cyIsInJlZ0V4cCIsInR5cGUiLCJ0ZXN0U3RyaW5nIiwicmVzdWx0IiwicmVnRXhwcyIsIm1hdGNoIiwicGhvbmUiLCJnZXRSR0IiLCJjb2xvciIsImlzQXJyYXkiLCJsZW5ndGgiLCJleGVjIiwicGFyc2VJbnQiLCJwYXJzZUZsb2F0IiwicGFyc2VDb29raWVzIiwiY29va2llcyIsImNhIiwiY29va2llIiwic3BsaXQiLCJyZSIsImkiLCJsIiwiYyIsInVuZXNjYXBlIiwidmFsdWUiLCJkYXlzIiwic2VjdXJlIiwiZXhwaXJlcyIsImRvbWFpbiIsImxvY1Byb3RvY29sIiwiZGF0ZSIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInRvR01UU3RyaW5nIiwibG9jYXRpb24iLCJob3N0bmFtZSIsInByb3RvY29sIiwiZXNjYXBlIiwibnVtYmVyIiwibWF0aCIsImZuIiwiaW4iLCJhcnJheSIsImFyciIsIkFycmF5IiwiZnJvbSIsImluZGV4T2YiLCJiZXR3ZWVuIiwiYSIsImIiLCJyaWdodCIsInJlcyIsImUiLCJNYXRoIiwicG93IiwiZmxvb3IiLCJyb3VuZCIsImRlY2xpbmF0aW9uIiwid29yZHMiLCJ1cmxQYXJhbXMiLCJsb2MiLCJocmVmIiwic3RhcnRQb3MiLCJzbGljZSIsInJlcGxhY2UiLCJmb3JFYWNoIiwiZWxlbSJdLCJtYXBwaW5ncyI6IkNBQUMsU0FBV0EsRUFBUUMsRUFBVUMsR0FFMUJGLEVBQU9HLFNBQVcsR0FBSSxZQWtCbEJDLEtBQUtDLGlCQUFpQixXQUFZLFdBRzlCLFFBQVNDLEdBQVNDLEVBQU1DLEdBR3BCLE1BRkFDLEdBQUtKLGlCQUFpQkssTUFBTUQsRUFBTUUsV0FF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QURBQyxFQUFJQyxLQUFLQyxJQUFJLEdBQUlKLEdBQVMsRUFPOUIsT0FKQUMsR0FBTWIsRUFBU2MsRUFDZkQsR0FBWUUsS0FBS0UsTUFBTUosR0FDdkJBLEdBQU9DLEVBRUFDLEtBQUtHLE1BQU1MLElBR3RCTSxZQUFlLFNBQVVDLEdBQ3JCLEdBQUlWLEdBQUl6RCxLQUFLMkQsTUFBTSxHQUNmRCxFQUFJMUQsS0FBSzJELE1BQU0sRUFFbkIsT0FBUyxJQUFMRixHQUFXVCxFQUFLVSxHQUFHRixRQUFRLEdBQUksSUFFeEJSLEVBQUtTLEdBQUdQLEdBQUcsRUFBRyxFQUFHLEtBQU9GLEVBQUtVLEdBQUdGLFFBQVEsR0FBSSxJQUM1Q1csRUFBTSxHQUVOQSxFQUFNLEdBSk5BLEVBQU0sS0FTbEJsQixNQUtmakQsS0FBS0MsaUJBQWlCLFlBQWEsV0FVL0IsUUFBU21FLEdBQVVqRSxHQUNmLEdBQUl5RCxNQUNBUyxFQUFXMUIsU0FBUzJCLEtBQ3BCQyxFQUFXRixFQUFJZCxRQUFRLE9BQVEsRUFBS2MsRUFBSWQsUUFBUSxLQUFPYyxFQUFJZCxRQUFRLE9BQVEsR0FBS2MsRUFBSWQsUUFBUSxJQWNoRyxPQVpJZ0IsTUFBYSxHQUNiRixFQUNLRyxNQUFNRCxFQUFXLEdBQ2pCRSxRQUFRLE9BQVEsS0FDaEIvQyxNQUFNLEtBQ05nRCxRQUFRLFNBQVVDLEdBQ2ZBLEVBQU9BLEVBQUtqRCxNQUFNLEtBRWxCa0MsRUFBSWUsRUFBSyxJQUFNQSxFQUFLLEtBQU0sSUFJL0J4RSxFQUFPeUQsRUFBSXpELElBQVMsS0FBT3lELEVBR3RDLE1BQU9RLE9BTWhCeEUsT0FBUUMsU0FBVUMiLCJmaWxlIjoiU2xhdnVueWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuICAgIHdpbmRvdy5TbGF2dW55YSA9IG5ldyBmdW5jdGlvbiBTbGF2dW55YSgpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJpdmF0ZSB2YXJpYWJsZXNcbiAgICAgICAgICovXG4gICAgICAgIHZhciBjb29raWVzID0ge307XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkaW5nIGV4dGVybmFsIHRvb2xzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBuYW1lIGluaXRUb29sXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVG9vbCBuYW1lXG4gICAgICAgICAqIEBwYXJhbSBnZW5lcmF0b3Ige2Z1bmN0aW9ufSAtIEdlbmVyYXRvciBmdW5jdGlvbiwgbXVzdCByZXR1cm4gZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMgU2xhdnVueWFcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX19kZWZpbmVHZXR0ZXJfXygnaW5pdFRvb2wnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRUb29sKG5hbWUsIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgICAgIHNlbGYuX19kZWZpbmVHZXR0ZXJfXy5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpbml0VG9vbDtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICB0aGlzLl9fZGVmaW5lR2V0dGVyX18oJ3JlZ0V4cCcsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHJlZ0V4cHMgPSB7XG4gICAgICAgICAgICAgICAgcGhvbmU6IFtcbiAgICAgICAgICAgICAgICAgICAgL14oKD86XFwrN3w4KVxccyooPzpcXCgoXFxkezN9KVxcKXwoXFxkezN9KSkpP1xccyooXFxkezN9W1xccy1dP1xcZHsyfVtcXHMtXT9cXGR7Mn0pJC9cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiByZWdFeHAodHlwZSwgdGVzdFN0cmluZykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlZ0V4cCwgcmVzdWx0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlIHx8ICFyZWdFeHBzW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBpZiAodGVzdFN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHJlZ0V4cCBpbiByZWdFeHBzW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID0gdGVzdFN0cmluZy5tYXRjaChyZWdFeHBzW3R5cGVdW3JlZ0V4cF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZ0V4cHNbdHlwZV07XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlZ0V4cDtcblxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9fZGVmaW5lR2V0dGVyX18oJ2dldFJHQicsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UkdCKGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmIChjb2xvciAmJiBpc0FycmF5KGNvbG9yKSAmJiBjb2xvci5sZW5ndGggPT0gMykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9IC9yZ2JcXChcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldezEsM30pXFxzKlxcKS8uZXhlYyhjb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHJlc3VsdFsxXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChyZXN1bHRbMl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocmVzdWx0WzNdKVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPSAvcmdiXFwoXFxzKihbMC05XSsoPzpcXC5bMC05XSspPylcXCVcXHMqLFxccyooWzAtOV0rKD86XFwuWzAtOV0rKT8pXFwlXFxzKixcXHMqKFswLTldKyg/OlxcLlswLTldKyk/KVxcJVxccypcXCkvLmV4ZWMoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KHJlc3VsdFsxXSkgKiAyLjU1LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChyZXN1bHRbMl0pICogMi41NSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQocmVzdWx0WzNdKSAqIDIuNTVcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID0gLyMoW2EtZkEtRjAtOV17Mn0pKFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkvLmV4ZWMoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9IC8jKFthLWZBLUYwLTldKShbYS1mQS1GMC05XSkoW2EtZkEtRjAtOV0pLy5leGVjKGNvbG9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocmVzdWx0WzFdICsgcmVzdWx0WzFdLCAxNiksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChyZXN1bHRbMl0gKyByZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHJlc3VsdFszXSArIHJlc3VsdFszXSwgMTYpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZ2V0UkdCO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX19kZWZpbmVHZXR0ZXJfXygnY29va2llcycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VDb29raWVzKCkge1xuICAgICAgICAgICAgICAgIGNvb2tpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgY2EgID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHJlICA9IC9eW1xcc10qKFteXFxzXSs/KSQvaTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGNhW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29raWVzW2NbMF0ubWF0Y2gocmUpWzFdXSA9IHVuZXNjYXBlKGNbMV0ubWF0Y2gocmUpID8gY1sxXS5tYXRjaChyZSlbMV0gOiAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvb2tpZXMobmFtZSwgdmFsdWUsIGRheXMsIHNlY3VyZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGV4cGlyZXMsXG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICAgICAgICAgICAgbG9jUHJvdG9jb2w7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlQ29va2llcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lID8gY29va2llc1tuYW1lXSA6IGNvb2tpZXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZXhwaXJlcyA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChkYXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgKGRheXMgKiAyNCAqIDYwICogNjAgKiAxZTMpKTtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlcyA9ICc7IGV4cGlyZXM9JyArIGRhdGUudG9HTVRTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZG9tYWluICAgICAgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gICAgICAgICAgICAgICAgbG9jUHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAoJydcbiAgICAgICAgICAgICAgICAgICAgKyBuYW1lICsgJz0nICsgZXNjYXBlKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICArIGV4cGlyZXNcbiAgICAgICAgICAgICAgICAgICAgKyAnOyBwYXRoPS8nICsgKGRvbWFpbiA/ICc7IGRvbWFpbj0uJyArIGRvbWFpbiA6ICcnKSArIChzZWN1cmUgJiYgbG9jUHJvdG9jb2wgPT0gJ2h0dHBzOicgPyAnOyBzZWN1cmUnIDogJycpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29va2llcztcblxuICAgICAgICB9KTtcblxuXG4gICAgICAgIHRoaXMuX19kZWZpbmVHZXR0ZXJfXyhcIm1hdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0aCA9IHRoaXMubWF0aDtcbiAgICAgICAgICAgICAgICBmbiAgICAgICA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJpblwiOiBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9IGFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnIuaW5kZXhPZihudW1iZXIpICE9PSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBcImJldHdlZW5cIjogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhIDwgbnVtYmVyICYmIG51bWJlciA8IGI7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgXCJyaWdodFwiOiBmdW5jdGlvbiAocmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gTWF0aC5wb3coMTAsIHJpZ2h0IHx8IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcztcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gbnVtYmVyIC8gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcyAtIE1hdGguZmxvb3IocmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyAqPSBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChyZXMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIFwiZGVjbGluYXRpb25cIjogZnVuY3Rpb24gKHdvcmRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMucmlnaHQoMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHRoaXMucmlnaHQoMik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhID09IDEgJiYgIW1hdGgoYikuYmV0d2VlbigxMCwgMjApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRoKGEpLmluKDIsIDMsIDQpICYmICFtYXRoKGIpLmJldHdlZW4oMTAsIDIwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3Jkc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICB0aGlzLl9fZGVmaW5lR2V0dGVyX18oJ3VybFBhcmFtcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IHVybCBTZWFyY2ggYW5kIEhhc2ggcGFyYW1zXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQG5hbWUgdXJsUGFyYW1zXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lXSAtIFBhcmFtZXRlciBuYW1lXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xib29sZWFufG51bWJlcnxvYmplY3R9IC0gUGFyYW1ldGVyIGJ5IG5hbWUgb3Igb2JqZWN0IG9mIGFsbCBwYXJhbWV0ZXJzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVybFBhcmFtcyhuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyAgICAgID0ge30sXG4gICAgICAgICAgICAgICAgICAgIGxvYyAgICAgID0gbG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRQb3MgPSBsb2MuaW5kZXhPZignPycpICE9IC0xID8gbG9jLmluZGV4T2YoJz8nKSA6IGxvYy5pbmRleE9mKCcjJykgIT0gLTEgPyBsb2MuaW5kZXhPZignIycpIDogZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRQb3MgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY1xuICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKHN0YXJ0UG9zICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bPyNdLywgXCImXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCImXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSBlbGVtLnNwbGl0KFwiPVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc1tlbGVtWzBdXSA9IGVsZW1bMV0gfHwgdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lID8gcmVzW25hbWVdIHx8IG51bGwgOiByZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1cmxQYXJhbXM7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG59KSh3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpO1xuIl19
